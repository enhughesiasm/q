{"version":3,"sources":["resources/styles/styles.js","error_boundary.js","components/shared/header.js","components/shared/footer.js","components/shared/bounce_loader_wrapped.js","components/shared/giphy.js","components/quiz/team_banner.js","components/quiz/welcome_banner.js","components/quiz/waiting_for_session.js","components/quiz/round_countdown.js","components/quiz/live_round/exhausted.js","components/quiz/live_round/round_banner.js","components/quiz/live_round/question_text.js","components/quiz/live_round/answered_question.js","components/quiz/live_round/unanswered_question.js","components/shared/fade_up.js","components/quiz/live_round/live_score.js","components/quiz/live_round/end_of_round_countdown.js","components/quiz/live_round/loading_question.js","components/quiz/live_round/live_round.js","components/quiz/next_round.js","components/quiz/team_status.js","components/quiz/player_rounds_table.js","components/quiz/between_rounds.js","components/quiz/round_finished.js","components/quiz/session_loading.js","components/quiz/live_session.js","components/quiz/assigning_team.js","components/quiz/team_assigned.js","components/quiz/session.js","components/shared/success_icon.js","components/quiz/session_form.js","config.js","components/quiz/quiz_login.js","components/quiz/quiz_explanation.js","components/quiz/quiz.js","components/admin/live_tag.js","components/admin/admin_session_table.js","components/admin/player_team.js","components/admin/player_table.js","components/admin/admin_session.js","components/admin/admin_session_list.js","components/admin/platonic_rounds_table.js","components/admin/admin.js","components/admin/admin_gate.js","components/scores/session_scores.js","components/scores/scores.js","App.js","serviceWorker.js","index.js","resources/images/GiphyWhite.png","resources/images/GiphyBlack.png"],"names":["require","ErrorBoundary","props","state","hasCaughtError","error","console","this","setState","children","React","Component","NavBar","className","role","aria-label","href","Header","Footer","currentYear","Date","getFullYear","BounceLoaderWrapper","style","display","color","Giphy","apiKey","endPoint","rating","imgUrl","visible","requestEndpoint","tag","fetch","method","then","result","json","gif","data","images","fixed_height","url","catch","e","log","poweredByLocation","colour","black","white","opacity","src","TeamBanner","background","team","paddingTop","paddingBottom","name","WelcomeBanner","playerName","WaitingForSession","sessionName","RoundCountdown","initialSecondsRemaining","secondsRemaining","roundNumber","roundName","value","max","ExhaustedRound","scoreForThisRound","roundScore","playerStatus","scoresByRoundInstanceId","filter","a","roundInstanceId","length","parseInt","totalScore","fromNow","ago","endTime","RoundBanner","marginBottom","round","QuestionText","question","prompt","parseAsMaths","Context","input","Node","AnsweredQuestion","answeredCorrectly","submittedIndex","Number","isInteger","correctIndex","answers","map","answer","i","key","clickedIndex","disabled","whiteSpace","height","icon","faHandPointRight","inline","faHandPointLeft","onClick","onClickNextQuestion","marginTop","Math","abs","pointsEarned","UnansweredQuestion","answerClicked","onClickAnswer","FadeUp","showUntil","now","moment","beginTime","duration","diff","isBefore","success","transition","content","nextProps","prevState","LiveScore","previousTotalScore","changeInTotalScore","showAnimationUntil","currentScore","showChangeAnimation","change","add","EndOfRoundCountdown","diffInMs","showCountdown","LoadingQuestion","LiveRound","bind","pullQuestion","pullNextQuestion","submitAnswer","playerQuestion","answered","exhausted","answerReceived","player","id","NextRound","isLive","session","TeamStatus","show","teamStatus","t","teamId","teams","playerCount","ts","playerTeam","paddingLeft","marginRight","PlayerRounds","completedRounds","BetweenRounds","rounds","slice","finishedRounds","questionsAnswered","correctAnswers","RoundFinished","SessionLoading","LiveSession","lastRound","allInstances","allRoundInstances","nextRoundIndexes","justFinished","initialLoadComplete","isLoadingRounds","isLoading","AssigningTeam","random","TeamAssigned","Session","showTeamAssignedUntil","showTeamAssignedScreenUntil","showTeamAssignedScreen","SuccessIcon","position","faCheck","faTimes","SessionForm","onSubmit","onChangePlayerName","onChangeSessionName","handleChange","target","sessionForm","preventDefault","handleSubmit","width","htmlFor","isPlayerNameValid","placeholder","onChange","faUser","isSessionNameValid","faSuperscript","type","isValid","isSubmitting","config","isDev","socket","protocol","port","address","quiz","showRoundFinishedScreenForMilliseconds","showTeamAssignedScreenForSeconds","assignTeamForMilliseconds","QuizLogin","previousSubmission","hasSubmitted","socketAddress","socketIOClient","on","emit","instances","setServerRoundInstances","getPlayerStatus","receiveQuestion","reinitialiseState","status","receivePlayerStatus","playerId","receiveTeamAssignment","receiveTeamReassignment","ids","exhaustedRoundInstanceIds","push","forceUpdate","initial","serverLoad","updateAfterServerLoad","statusAfterPlayerLoad","serverRoundInstances","nextPlayerQuestion","answerResponse","score","statusUpdateCounter","handleSessionFormSubmit","handleSessionFormChange","isSessionFormValid","loadRoundInstances","updateRoundInstances","getCurrentRoundScore","receiveAnswerResponse","timerID","setInterval","tick","clearInterval","counter","startTime","sessionId","sort","i1","i2","s1","s2","isAfter","forEach","r","platonicRoundIds","answerIndex","response","alert","scoreByRoundId","names","outStr","join","instance","getSecondsRemainingBeforeRoundStart","isRoundLive","formatRoundNames","platonicRoundNames","indexOf","millisecondsSinceRoundEnd","newTeam","showScreenUntil","submission","JSON","stringify","setTimeout","connected","faCircle","faCircleNotch","QuizExplanation","Quiz","padding","LiveTag","marginLeft","SessionTable","onDeleteSessionClicked","confirmAlert","title","message","buttons","label","handleDeleteSession","sessions","faTrash","handleSelectSession","handleFlipSessionLive","players","n","isConnected","p","roundInstances","ri","PlayerTeam","teamName","find","PlayerTable","handleFlipTeam","handleDeletePlayer","onDeletePlayerClicked","totalQuestions","answeredQuestions","SessionAdmin","selectedRoundLength","selectedRoundDelay","selectedWrongAnswerFactor","inputPointsPerQuestion","isLoadingPreviousRounds","selectedPlatonicRoundIds","handleRoundLengthChange","handleRoundDelayChange","handlePointsPerQuestionChange","handleWrongAnswerFactorChange","onSubmitNewRound","onClickStartRound","newRoundIsValid","platonicRoundLabelClicked","isNaN","prid","platonicRounds","toString","toUpperCase","index","splice","parseFloat","v","ex","newRoundInstance","utc","format","pointsPerQuestion","wrongAnswerFactor","handleSubmitNewRound","handleDeleteRoundInstance","pr","questionsAsked","checked","SessionList","selectedSessionId","PlatonicRoundsTable","questionCount","Admin","window","addEventListener","fetchQuiz","isFetching","newSessionName","handleReseedDatabase","handleWipeAllData","onClickWipeAllData","onClickReseedDatabase","createNewSession","isNewSessionNameValid","document","loadInitialData","loadPlatonicRounds","loadTeams","list","newRound","AdminGate","temporarySocket","inputWord","passed","onChangeInputWord","onClickGoButton","SessionScores","x","negative","y","pow","ceil","maxScore","minScore","teamScores","yOffset","fontSize","fontWeight","fill","stroke","strokeWidth","o","reduce","min","yMax","roundUp","yDomain","margin","selectSession","animation","xType","overflow","colorType","allowOffsetToBeReversed","windowDimensions","Scores","updateSession","fetchLiveSessions","liveSessions","receiveLiveSessions","sessionSelected","s","App","BrowserRouter","Switch","Route","exact","path","component","NotFound","Boolean","location","hostname","match","render","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.a2b5a9e3.chunk.js","sourcesContent":["require('../../../node_modules/bulma/sass/utilities/initial-variables.sass');\nrequire('../../../node_modules/bulma/sass/utilities/functions.sass');\nrequire('./maths.scss');\nrequire('./quiz.scss');\n\n// alter bulma variables\nrequire('./customise.scss');\n\n// my responsive fixes\nrequire('./responsive.scss');\n","import React from 'react';\n\nexport default class ErrorBoundary extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { hasCaughtError: false };\n\t}\n\n\tcomponentDidCatch(error) {\n\t\tconsole.error(error);\n\t\tthis.setState({ hasCaughtError: true });\n\t}\n\n\trender() {\n\t\tif (this.state.hasCaughtError) {\n\t\t\treturn <div>Sorry! Something went wrong. Please try reloading the site.</div>;\n\t\t}\n\t\treturn this.props.children;\n\t}\n}","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst Header = () => {\n\treturn (\n\t\t<header>\n\t\t\t<NavBar />\n\t\t</header>\n\t);\n};\n\nconst NavBar = () => (\n\t<nav\n\t\tclassName='navbar is-info is-fixed-top'\n\t\trole='navigation'\n\t\taria-label='main navigation'>\n\t\t<div className='navbar-brand'>\n\t\t\t<h1 className='is-size-1 has-text-weight-bold has-text-centered px-4 py-3'>\n\t\t\t\tq\n\t\t\t</h1>\n\t\t</div>\n\t\t<div className='navbar-menu'>\n\t\t\t<div className='navbar-start'>\n\t\t\t\t{/* <NavLink to=\"/\" className=\"navbar-item\">\n\t\t\t\treturn to interactive login\n\t\t\t</NavLink> */}\n\t\t\t</div>\n\t\t\t<div className='navbar-end'>\n\t\t\t\t<a className='navbar-item' href='http://www.enhughesiasm.com'>\n\t\t\t\t\treturn to enhughesiasm\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</nav>\n);\n\nexport default Header;\n","import React from 'react';\n\nconst Footer = () => {\n\tconst currentYear = new Date().getFullYear();\n\treturn (\n\t\t<footer className='footer is-primary is-fixed-bottom'>\n\t\t\t<div className='content has-text-centered'>\n\t\t\t\t&copy; Neil Hughes 2019\n\t\t\t\t{currentYear !== 2019 ? '' + currentYear : ''}\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n\nexport default Footer;\n","import React from 'react';\nimport { css } from 'react-emotion';\nimport { BounceLoader } from 'react-spinners';\nimport PropTypes from 'prop-types';\n\nconst BounceLoaderWrapper = (props) => (\n\t<div style={{display:'inline-block'}}>\n\t\t<BounceLoader color={props.color ? props.color : '#dddddd'}/>\n\t</div>\n);\n\nBounceLoaderWrapper.propTypes = {\n\tcolor: PropTypes.string\n};\n\n\nexport default BounceLoaderWrapper;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport white from './../../resources/images/GiphyWhite.png';\nimport black from './../../resources/images/GiphyBlack.png';\n\nclass Giphy extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tapiKey: '9LYRB89KKFIH8WgVUetwuoQCB0LihwnT',\n\t\t\tendPoint: 'http://api.giphy.com/v1/gifs/random',\n\t\t\trating: 'g', // 'Y, G, PG, PG-13 and R'\n\t\t\timgUrl: '',\n\t\t\tvisible: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tvar requestEndpoint =\n\t\t\tthis.state.endPoint +\n\t\t\t'?api_key=' +\n\t\t\tthis.state.apiKey +\n\t\t\t'&tag=' +\n\t\t\tthis.props.tag +\n\t\t\t'&rating=' +\n\t\t\tthis.state.rating;\n\n\t\tfetch(requestEndpoint, {\n\t\t\tmethod: 'GET',\n\t\t})\n\t\t\t.then((result) => result.json())\n\t\t\t.then((gif) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\timgUrl: gif.data.images.fixed_height.url,\n\t\t\t\t\tvisible: true,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.log(\"Couldn't load from giphy\");\n\t\t\t});\n\t}\n\n\trender() {\n\t\tlet poweredByLocation = this.props.colour == 'light' ? black : white;\n\n\t\treturn (\n\t\t\t<div style={{ opacity: this.state.visible ? 1 : 0 }}>\n\t\t\t\t<p>\n\t\t\t\t\t<img src={this.state.imgUrl} />\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<img src={poweredByLocation} />\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nGiphy.propTypes = {\n\ttag: PropTypes.string.isRequired,\n\tcolour: PropTypes.string,\n};\n\nexport default Giphy;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst TeamBanner = (props) => (\n\t<section className=\"hero is-dark is-paddingless\" style={{background: props.team.colour}}>\n\t\t<div className=\"hero-body has-text-centered\" style={{paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\n\t\t\t<h2 className=\"subtitle is-size-6-mobile\">\n\t\t\t\t\tValued member of Team {props.team.name}\n\t\t\t</h2>\n\t\t</div>\n\t</section>\n);\n\nTeamBanner.propTypes = {\n\tteam: PropTypes.object.isRequired\n};\n\nexport default TeamBanner;","import React from 'react';\nimport TeamBanner from './team_banner';\nimport PropTypes from 'prop-types';\n\nconst WelcomeBanner = (props) => (\n\t<div className=\"notification is-light has-text-centered\">\n\t\t<h1 className=\"title is-size-5-mobile\">Welcome, {props.playerName}.</h1>\n\t\t<TeamBanner team={props.team} />\n\t</div>\n);\n\nWelcomeBanner.propTypes = {\n\tplayerName: PropTypes.string.isRequired,\n\tteam: PropTypes.object.isRequired\n};\n\nexport default WelcomeBanner;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport BounceLoaderWrapper from '../shared/bounce_loader_wrapped';\nimport Giphy from '../shared/giphy';\nimport WelcomeBanner from './welcome_banner';\n\nconst WaitingForSession = (props) =>\n\t<div>\n\t\t<WelcomeBanner team={props.team} playerName={props.playerName}/>\n\t\t<div className=\"notification is-light\">\n\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t<h1 className=\"subtitle is-size-5-mobile\">This is <span className=\"has-text-success has-text-weight-bold\">{props.sessionName}</span></h1>\n\t\t\t\t<h2 className=\"subtitle has-text-primary is-size-6-mobile\">The session isn&apos;t yet live, but it should be soon.</h2>\n\t\t\t\t<h2 className=\"subtitle is-size-4 is-size-6-mobile\">Hang on till then.</h2>\n\t\t\t\t<BounceLoaderWrapper />\n\t\t\t\t<Giphy tag=\"bored\"/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n;\n\nWaitingForSession.propTypes = {\n\tplayerName: PropTypes.string.isRequired,\n\tsessionName: PropTypes.string.isRequired,\n\tteam: PropTypes.object.isRequired\n};\n\nexport default WaitingForSession;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Giphy from '../shared/giphy';\n\nclass RoundCountdown extends Component{\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinitialSecondsRemaining: 30\n\t\t};\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.setState({ initialSecondsRemaining: this.props.secondsRemaining });\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<section className=\"hero is-light is-medium\">\n\t\t\t\t<div className=\"hero-body\">\n\t\t\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">Round { this.props.roundNumber}</h2>\n\t\t\t\t\t\t<h1 className=\"title is-size-5-mobile is-spaced\">&quot;{this.props.roundName}&quot;</h1>\n\t\t\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">will start in</h2>\n\n\t\t\t\t\t\t<h1 className={(this.props.secondsRemaining <= this.state.initialSecondsRemaining ? 'has-text-primary' : '')+ ' title is-size-5-mobile is-spaced'}>\n\t\t\t\t\t\t\t{this.props.secondsRemaining}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">seconds!</h2>\n\t\t\t\t\t\t{ this.props.secondsRemaining <= this.state.initialSecondsRemaining &&\n\t\t\t\t\t\t\t\t\t<progress className=\"progress is-primary\" value={this.state.initialSecondsRemaining-this.props.secondsRemaining} max={this.state.initialSecondsRemaining}></progress>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Giphy tag={'excitement'} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nRoundCountdown.propTypes = {\n\tsecondsRemaining: PropTypes.number.isRequired,\n\troundName: PropTypes.string.isRequired,\n\troundNumber: PropTypes.number.isRequired\n};\n\nexport default RoundCountdown;","import React from 'react';\nimport Giphy from '../../shared/giphy';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\n\nconst ExhaustedRound = (props) =>{\n\tlet scoreForThisRound = 0;\n\tlet roundScore = props.playerStatus.scoresByRoundInstanceId.filter(a => a[0] == props.roundInstanceId);\n\tif(roundScore && roundScore.length > 0 && roundScore[0][1]){\n\t\tscoreForThisRound = parseInt(roundScore[0][1]);\n\t}\n\n\treturn(\n\t\t<section className=\"hero is-light is-medium\">\n\t\t\t<div className=\"hero-body\">\n\t\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">Hooray!</h2>\n\t\t\t\t\t<h1 className=\"title is-size-5-mobile has-text-success is-spaced\">You&apos;ve answered every single question.</h1>\n\t\t\t\t\t<h3 className=\"subtitle is-size-6-mobile is-spaced\">\n\t\t\t\t\t\tThis round you scored <span className={'is-size-4 is-size-6-mobile ' + scoreForThisRound > 0 ? 'has-text-success' : 'has-text-danger' }>{ scoreForThisRound }</span>\n\t\t\t\t\t\t{ scoreForThisRound == props.playerStatus.totalScore ? '.' :\n\t\t\t\t\t\t\t<span> and your total score is <span className={'is-size-4 is-size-6-mobile ' + props.playerStatus.totalScore > 0 ? 'has-text-success' : 'has-text-danger' }>{props.playerStatus.totalScore}</span> </span> }\n\t\t\t\t\t</h3>\n\t\t\t\t\t<h3 className=\"subtitle is-size-6-mobile is-spaced\">Chill out until the end of the round.</h3>\n\t\t\t\t\t<h3 className=\"subtitle is-size-6-mobile\">(there&apos;s <Moment fromNow ago>{props.endTime}</Moment> to go).</h3>\n\t\t\t\t\t<Giphy tag={'relax'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>);};\n\nExhaustedRound.propTypes = {\n\troundInstanceId: PropTypes.number.isRequired,\n\tendTime: PropTypes.string.isRequired,\n\tplayerStatus: PropTypes.object.isRequired\n};\n\nexport default ExhaustedRound;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'react-moment';\n\nconst RoundBanner = (props) => {\n\n\treturn(\n\t\t<section className=\"notification is-dark is-marginless\"  style={{background: props.team.colour}}>\n\t\t\t<h3 className=\"subtitle has-text-weight-bold is-size-5 is-size-6-mobile\" style={{marginBottom:'0.5rem'}}>\n\t\t\t\t\t\tRound { props.round.roundNumber }: &quot;{props.round.name}&quot;\n\t\t\t</h3>\n\t\t\t<h2 className=\"subtitle is-size-5 is-size-6-mobile\">\n\t\t\t\t\tTime Remaining: <Moment fromNow ago>{props.round.endTime}</Moment>\n\t\t\t</h2>\n\t\t</section>\n\t);};\n\nRoundBanner.propTypes = {\n\tround: PropTypes.object.isRequired,\n\tteam: PropTypes.object.isRequired\n};\n\nexport default RoundBanner;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MathJax from 'react-mathjax2';\n\nconst QuestionText = (props) => (\n\n\t<div>\n\t\t<div className=\"notification is-light is-marginless has-text-centered\">\n\t\t\t<h2 className=\"subtitle is-size-6-mobile\">{props.question.prompt}</h2>\n\t\t</div>\n\t\t<section className=\"notification is-dark is-bold has-text-centered\">\n\n\t\t\t{ props.question.parseAsMaths && <MathJax.Context input='tex'>\n\t\t\t\t<span className=\"is-size-2 is-size-5-mobile\">\n\t\t\t\t\t<MathJax.Node>{ props.question.question }</MathJax.Node>\n\t\t\t\t</span>\n\t\t\t</MathJax.Context> }\n\t\t\t{ !props.question.parseAsMaths && <span className=\"is-size-2 is-size-5-mobile\">{props.question.question}</span> }\n\n\t\t\t{/*<h2 className=\"subtitle\">Question:</h2>*/}\n\t\t\t{/* <div className=\"title\" dangerouslySetInnerHTML={ {__html: props.questionHtml }}/> */}\n\t\t</section>\n\t</div>\n);\n\nQuestionText.propTypes = {\n\tquestion: PropTypes.object.isRequired\n};\n\nexport default QuestionText;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport QuestionText from './question_text';\nimport Giphy from '../../shared/giphy';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHandPointRight,faHandPointLeft } from '@fortawesome/free-solid-svg-icons';\nimport MathJax from 'react-mathjax2';\n\n\nconst AnsweredQuestion = (props) => {\n\tlet question = props.question;\n\tlet answeredCorrectly = (question.submittedIndex != null && Number.isInteger(question.submittedIndex) && question.correctIndex != null && Number.isInteger(question.correctIndex) && question.submittedIndex == question.correctIndex);\n\treturn(\n\t\t<div>\n\t\t\t<QuestionText question={props.question} />\n\t\t\t{\n\t\t\t\tprops.question.answers.map((answer, i) =>\n\t\t\t\t\t<div key={i} className=\"quizanswer\">\n\t\t\t\t\t\t<button className={'button is-size-4 is-size-6-mobile is-medium is-fullwidth ' + ((question.correctIndex == i) ? ' is-success ' : (props.clickedIndex == i ? ' is-danger ' : ' is-dark '))}\n\t\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t\t\tstyle={{ whiteSpace: 'normal', height: '100%'}}\n\t\t\t\t\t\t\tvalue={i}>\n\t\t\t\t\t\t\t{props.clickedIndex == i && <span\n\t\t\t\t\t\t\t\tclassName=\"tag is-black is-pulled-left answer-tag-left\">\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHandPointRight} />\n\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t\t{ props.question.parseAsMaths && <MathJax.Context input='tex'>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<MathJax.Node inline>{ answer }</MathJax.Node>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</MathJax.Context> }\n\t\t\t\t\t\t\t{ !props.question.parseAsMaths && <span>{answer}</span> }\n\t\t\t\t\t\t\t{props.clickedIndex == i && <span\n\t\t\t\t\t\t\t\tclassName=\"tag is-black is-pulled-right answer-tag-right\">\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faHandPointLeft} />\n\t\t\t\t\t\t\t</span>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\t<div className={'notification is-marginless has-text-centered ' + (answeredCorrectly ? 'is-success' : 'is-danger')}>\n\t\t\t\t<button className=\"button is-medium is-size-6-mobile is-fullwidth is-warning\" onClick={props.onClickNextQuestion}>\n\t\t\t\t\tNEXT QUESTION\n\t\t\t\t</button>\n\t\t\t\t<h1 className=\"title is-spaced is-size-4 is-size-6-mobile \" style={{marginTop:'0.5rem'}}>{ answeredCorrectly ? 'CORRECT' : 'INCORRECT' }</h1>\n\t\t\t\t<h2 className=\"subtitle is-spaced is-size-5 is-size-6-mobile \">You {answeredCorrectly ? 'gained' : 'lost'} <span className=\"has-text-bold is-size-3 is-size-5-mobile \">{ Math.abs(question.pointsEarned) }</span> points. </h2>\n\t\t\t\t<Giphy tag={ answeredCorrectly ? 'celebration' : 'sad'}/>\n\t\t\t</div>\n\t\t</div>\n\t);};\n\n\nAnsweredQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tclickedIndex: PropTypes.number.isRequired,\n\tonClickNextQuestion: PropTypes.func.isRequired\n};\n\nexport default AnsweredQuestion;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport QuestionText from './question_text';\nimport MathJax from 'react-mathjax2';\n\nconst UnansweredQuestion = (props) => (\n\t<div>\n\t\t<QuestionText question={props.question} />\n\t\t{\n\t\t\tprops.question.answers.map((answer, i) =>\n\t\t\t\t<div key={i} className=\"quizanswer\">\n\t\t\t\t\t<button className={'button is-size-4 is-size-6-mobile is-medium is-fullwidth is-info '}\n\t\t\t\t\t\tdisabled={props.answerClicked}\n\t\t\t\t\t\tvalue={i}\n\t\t\t\t\t\tstyle={{ whiteSpace: 'normal', height: '100%'}}\n\t\t\t\t\t\tonClick={() => props.onClickAnswer(i)}>\n\t\t\t\t\t\t{ props.question.parseAsMaths && <MathJax.Context input='tex'>\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t<MathJax.Node inline>{ answer }</MathJax.Node>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</MathJax.Context> }\n\t\t\t\t\t\t{ !props.question.parseAsMaths && <span>{answer}</span> }\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\n\t</div>\n);\n\nUnansweredQuestion.propTypes = {\n\tquestion: PropTypes.object.isRequired,\n\tanswerClicked: PropTypes.bool.isRequired,\n\tonClickAnswer: PropTypes.func.isRequired\n};\n\nexport default UnansweredQuestion;","import React, { Component } from 'react';\nimport moment from 'moment';\n\nexport default class FadeUp extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowUntil: null\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState){\n\n\t\tif(nextProps.showUntil != prevState.showUntil){\n\n\t\t\tlet now = moment();\n\n\t\t\treturn {\n\t\t\t\tbeginTime:now,\n\t\t\t\tduration: nextProps.showUntil.diff(now),\n\t\t\t\tshowUntil: nextProps.showUntil\n\t\t\t};\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\n\t}\n\n\trender() {\n\t\tlet now = moment();\n\t\tlet opacity = 0;\n\t\tlet fractionThrough = 0;\n\n\t\tif(this.state.beginTime && this.state.duration){\n\n\t\t\tlet progress = now.diff(this.state.beginTime);\n\t\t\tfractionThrough = progress/ this.state.duration;\n\t\t\topacity = 1 - fractionThrough;\n\t\t}\n\t\tlet show = (now.isBefore(this.state.showUntil));\n\t\treturn (\n\t\t\t\n\t\t\t<span>\n\t\t\t\t<span className={\"content is-overlay has-text-centered is-size-4 has-text-weight-bold \" + (this.props.success ? 'has-background-success' : 'has-background-danger')} \n\t\t\t\t\tstyle={{ \t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\ttransition: `opacity .7s ease-in-out`,\t\t\t\t\t\n\t\t\t\t\topacity:opacity}}>\n\t\t\t\t\t<span className=\"level\">\n\t\t\t\t\t\t<span className=\"level-item\">\n\t\t\t\t\t\t\t{this.props.content}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\t\t\t\t\n\t\t\t</span>\n\t\t);\n\t}\n}","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport FadeUp from '../../shared/fade_up';\n\nexport default class LiveScore extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpreviousTotalScore: props.playerStatus.totalScore,\n\t\t\tchangeInTotalScore: null,\n\t\t\tshowAnimationUntil: null\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps(nextProps, prevState){\n\n\t\tconst showAnimationForSeconds = 1;\n\n\t\tif(nextProps.playerStatus.totalScore != prevState.previousTotalScore){\n\t\t\tlet change = nextProps.playerStatus.totalScore - (prevState.previousTotalScore ? prevState.previousTotalScore: 0);\n\n\t\t\treturn { previousTotalScore: nextProps.playerStatus.totalScore,\n\t\t\t\tchangeInTotalScore: change,\n\t\t\t\tshowAnimationUntil: moment().add(showAnimationForSeconds, 's')\n\t\t\t};\n\t\t}else{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\trender(){\n\t\tlet currentScore = 0;\n\t\tlet roundScore = this.props.playerStatus.scoresByRoundInstanceId.filter(a => a[0] == this.props.roundInstanceId);\n\t\tif(roundScore && roundScore.length > 0 && roundScore[0][1]){\n\t\t\tcurrentScore = parseInt(roundScore[0][1]);\n\t\t}\n\n\t\tlet showChangeAnimation = (this.state.changeInTotalScore != 0);\n\n\t\tlet success = this.state.changeInTotalScore > 0;\n\t\treturn(\n\t\t\t<div className=\"notification is-info is-clearfix\">\n\t\t\t\t<h1 className=\"title is-size-6 is-size-6-mobile is-pulled-left\" style={{marginBottom: 0}}>Round Score: { currentScore }</h1>\n\t\t\t\t<h1 className=\"title is-size-6 is-size-6-mobile is-pulled-right\" style={{marginBottom: 0}}>Total Score: { this.props.playerStatus.totalScore ? this.props.playerStatus.totalScore : 0 }</h1>\n\t\t\t\t{ showChangeAnimation && <FadeUp content={success ? '+' + this.state.changeInTotalScore : this.state.changeInTotalScore} success={ success } showUntil={this.state.showAnimationUntil} />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nLiveScore.propTypes = {\n\tplayerStatus: PropTypes.object.isRequired,\n\troundInstanceId: PropTypes.number.isRequired\n};","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\n\nconst EndOfRoundCountdown = (props) => {\n\tlet countdownMax = 30000;\n\tlet endTime = moment(props.endTime);\n\tlet diffInMs = endTime.diff(moment());\n\tlet showCountdown = false;\n\tif(diffInMs < countdownMax){\n\t\tshowCountdown = true;\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{ showCountdown && <div className=\"notification is-warning\" style={{marginTop: '0.8rem'}}>\n\t\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t\t<h2 className=\"subtitle is-size-6-mobile\">Not long left!</h2>\n\t\t\t\t\t<p><progress className=\"progress is-primary\" value={diffInMs} max={countdownMax}></progress></p>\n\t\t\t\t</div>\n\t\t\t</div>}\n\t\t</div>\n\t);};\n\nEndOfRoundCountdown.propTypes = {\n\tendTime: PropTypes.string.isRequired\n};\n\nexport default EndOfRoundCountdown;","import React from 'react';\nimport BounceLoaderWrapper from '../../shared/bounce_loader_wrapped';\n\nconst LoadingQuestion = () => (\n\t<div className=\"notification is-light\">\n\t\t<div className=\"content has-text-centered\">\n\t\t\t<h2 className=\"subtitle is-size-6-mobile\">thinking of question...</h2>\n\t\t\t<BounceLoaderWrapper />\n\t\t</div>\n\t</div>\n);\n\nexport default LoadingQuestion;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ExhaustedRound from './exhausted';\nimport RoundBanner from './round_banner';\nimport AnsweredQuestion from './answered_question';\nimport UnansweredQuestion from './unanswered_question';\nimport LiveScore from './live_score';\nimport EndOfRoundCountdown from './end_of_round_countdown';\nimport LoadingQuestion from './loading_question';\n\n\nclass LiveRound extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.onClickAnswer = this.onClickAnswer.bind(this);\n\t\tthis.pullQuestion = this.pullQuestion.bind(this);\n\n\t\tthis.state = { answerClicked: false, clickedIndex: -1 };\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.pullQuestion();\n\t}\n\n\tpullQuestion(){\n\t\tthis.setState({answerClicked: false, clickedIndex: -1});\n\t\tthis.props.round.pullNextQuestion(this.props.round);\n\t}\n\n\tonClickAnswer(clickedIndex){\n\t\tthis.setState({answerClicked: true, clickedIndex: clickedIndex});\n\t\tthis.props.round.submitAnswer(this.props.round, clickedIndex);\n\t}\n\n\trender() {\n\n\t\tlet question = this.props.round.playerQuestion;\n\t\tlet answered = false;\n\t\tlet exhausted = this.props.round.exhausted;\n\n\t\tif(question){\n\t\t\tanswered = (question.answerReceived != null);\n\t\t}\n\n\n\t\treturn (\n\t\t\t<div className=\"live-round\">\n\t\t\t\t<RoundBanner round={this.props.round} team={this.props.player.team} />\n\t\t\t\t<LiveScore playerStatus={this.props.playerStatus} roundInstanceId={this.props.round.id}/>\n\t\t\t\t{ exhausted && <ExhaustedRound roundInstanceId={this.props.round.id} endTime={this.props.round.endTime} playerStatus={this.props.playerStatus} />}\n\t\t\t\t{ !exhausted &&\n\t\t\t\t<div>\n\t\t\t\t\t{ !question && <LoadingQuestion />\t}\n\t\t\t\t\t{ question && !answered &&\n\t\t\t\t\t\t<UnansweredQuestion question={question} clickedIndex={this.state.clickedIndex} onClickAnswer={this.onClickAnswer} answerClicked={this.state.answerClicked} />\n\t\t\t\t\t}\n\t\t\t\t\t{ question && answered &&\n\t\t\t\t\t\t<AnsweredQuestion question={question} clickedIndex={this.state.clickedIndex} onClickNextQuestion={this.pullQuestion} />\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t<EndOfRoundCountdown endTime={this.props.round.endTime}/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nLiveRound.propTypes = {\n\tround: PropTypes.object.isRequired,\n\tplayer: PropTypes.object.isRequired,\n\tsession: PropTypes.object.isRequired,\n\tplayerStatus: PropTypes.object.isRequired\n};\n\nexport default LiveRound;","import React, { Component } from 'react';\nimport RoundCountdown from './round_countdown';\nimport PropTypes from 'prop-types';\nimport LiveRound from './live_round/live_round';\n\nclass NextRound extends Component {\n\n\tstatic propTypes = {\n\t\tround: PropTypes.object.isRequired,\n\t\tplayer: PropTypes.object.isRequired,\n\t\tsession: PropTypes.object.isRequired,\n\t\tplayerStatus: PropTypes.object.isRequired\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{\n\t\t\t\t\t!this.props.round.isLive && <RoundCountdown roundName={this.props.round.name} roundNumber={this.props.round.roundNumber} secondsRemaining={this.props.round.secondsRemaining} />\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tthis.props.round.isLive && <LiveRound round={this.props.round}\n\t\t\t\t\t\tplayer ={this.props.player}\n\t\t\t\t\t\tsession={this.props.session}\n\t\t\t\t\t\tplayerStatus={this.props.playerStatus} />\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default NextRound;","import React from 'react';\n\nconst TeamStatus = (props) =>\n{\n\tlet show = props.teamStatus && props.teamStatus.filter(t => t.teamId != null).length > 0 && props.teams && props.teams.length > 0;\n\n\treturn(\n\t\t<div className=\"notification is-light\">\n\t\t\t{ show && <h2 className=\"subtitle has-text-info is-size-6-mobile\">Meanwhile...</h2>}\n\t\t\t{ show && props.teamStatus && props.teamStatus.filter(t => t.playerCount > 0).map((ts, i) =>\n\t\t\t\t(ts.teamId == props.playerTeam.id)\n\t\t\t\t\t?\n\t\t\t\t\t<p key={i} className=\"has-text-success is-size-4 is-size-6-mobile\">\n\t\t\t\t\t\t<span style={{background:props.playerTeam.colour, color:'white', paddingLeft: '5px', marginRight: '5px'}}>Team {props.playerTeam.name} ({ts.playerCount} player{ts.playerCount > 1 ? 's' : ''}): </span>\n\t\t\t\t\t\t<br/><span className='has-text-weight-bold is-size-3 is-size-5-mobile'>{ts.totalScore ? ts.totalScore : 0} points</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t:\n\t\t\t\t\t<p key={i} className=\"has-text-danger is-size-4 is-size-6-mobile\"><span style={{background:props.teams.filter(t => t.id == ts.teamId)[0].colour, color:'white', paddingLeft: '5px', marginRight: '5px'}}>Team { props.teams.filter(t => t.id == ts.teamId)[0].name} ({ts.playerCount} player{ts.playerCount > 1 ? 's' : ''}): </span><br/><span className='has-text-weight-bold is-size-3 is-size-5-mobile'>{ts.totalScore ? ts.totalScore : 0} points</span></p>\n\t\t\t)}\n\n\t\t</div>);\n};\n\nexport default TeamStatus;","import React from 'react';\n\nconst PlayerRounds = (props) => (\n\t<div>\n\t\t<h3 className=\"subtitle is-size-4 is-size-6-mobile\">Your Scores</h3>\n\t\t<table className=\"table\">\n\t\t\t<thead>\n\t\t\t\t{/* <tr>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\tScore\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr> */}\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{ props.completedRounds.map((round, i) =>\n\t\t\t\t{\n\t\t\t\t\tlet roundScore = 0;\n\t\t\t\t\tif(props.playerStatus.scoresByRoundInstanceId[i] && props.playerStatus.scoresByRoundInstanceId[i][1])\n\t\t\t\t\t{\n\t\t\t\t\t\troundScore = props.playerStatus.scoresByRoundInstanceId[i][1];\n\t\t\t\t\t}\n\t\t\t\t\treturn <tr key={i}>\n\t\t\t\t\t\t<td>Round {i + 1}</td>\n\t\t\t\t\t\t<td>{round.name}</td>\n\t\t\t\t\t\t<td className={roundScore > 0 ? 'has-text-success' : 'has-text-danger'}>{roundScore}</td>\n\t\t\t\t\t</tr>;\n\t\t\t\t}\n\t\t\t\t)}\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n);\n\nexport default PlayerRounds;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport WelcomeBanner from './welcome_banner';\nimport TeamStatus from './team_status';\nimport PlayerRounds from './player_rounds_table';\n\nconst BetweenRounds = (props) => {\n\tlet completedRounds = props.rounds.slice(0, props.finishedRounds);\n\n\treturn (\n\t\t<div>\n\t\t\t<WelcomeBanner team={props.player.team} playerName={props.player.name}/>\n\t\t\t{props.finishedRounds > 0 &&\n\t\t<div className=\"notification is-light\">\n\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t<h2 className=\"subtitle is-size-6-mobile\">After <span className=\"has-text-info is-size-4 is-size-5-mobile has-text-weight-bold\">{props.finishedRounds}</span> round{props.finishedRounds > 1 ? 's' : ''}, your score is <span className={(props.playerStatus.totalScore < 0 ? 'has-text-danger' : 'has-text-success') + ' is-size-3 is-size-5-mobile has-text-weight-bold'}>{props.playerStatus.totalScore ? props.playerStatus.totalScore : 0}</span>.</h2>\n\t\t\t\t<h3 className=\"subtitle is-size-6-mobile\">You&apos;ve answered <span className=\"has-text-info is-size-4 is-size-5-mobile has-text-weight-bold\">{props.playerStatus.questionsAnswered}</span> questions, <span className={( props.playerStatus.correctAnswers > 0 ? 'has-text-success' : 'has-text-warning') + ' is-size-3 is-size-5-mobile has-text-weight-bold'}>{props.playerStatus.correctAnswers}</span> correctly<span className='has-text-info'>{ props.playerStatus.questionsAnswered != 0 ? ' (' + Math.round(100 * (props.playerStatus.correctAnswers / props.playerStatus.questionsAnswered)) + '%)' : '' }</span>.</h3>\n\t\t\t\t{ props.playerStatus && props.playerStatus.teamStatus && <TeamStatus teamStatus={props.playerStatus.teamStatus} playerTeam={props.player.team} teams={props.teams} /> }\n\t\t\t\t<PlayerRounds playerStatus={props.playerStatus} completedRounds={completedRounds} />\n\t\t\t</div>\n\t\t</div>\n\t\t\t}\n\t\t\t{ props.finishedRounds == 0 &&\n\t\t\t<div className=\"notification is-light\">\n\t\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t\t<h2 className=\"subtitle has-text-success is-size-5-mobile\">You&apos;re in!</h2>\n\t\t\t\t\t<h2 className=\"subtitle is-size-5-mobile\">Stay tuned, the first round will be along shortly...</h2>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t}\n\t\t</div>);\n};\n\nBetweenRounds.propTypes = {\n\tfinishedRounds: PropTypes.number.isRequired,\n\tplayerStatus: PropTypes.object.isRequired,\n\tplayer: PropTypes.object.isRequired,\n\trounds: PropTypes.array.isRequired,\n\tteams: PropTypes.array.isRequired\n};\n\nexport default BetweenRounds;","import React from 'react';\nimport Giphy from '../shared/giphy';\nimport BounceLoaderWrapper from '../shared/bounce_loader_wrapped';\n\nconst RoundFinished = () =>\n\t<section className=\"hero is-light is-medium\">\n\t\t<div className=\"hero-body\">\n\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t<h1 className=\"title is-size-5-mobile is-spaced\">Round Finished!</h1>\n\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">Let&apos;s see how you did...</h2>\n\t\t\t\t<BounceLoaderWrapper />\n\t\t\t\t<Giphy tag={'clock'} />\n\t\t\t</div>\n\t\t</div>\n\t</section>;\n\nexport default RoundFinished;","import React from 'react';\nimport BounceLoaderWrapper from '../shared/bounce_loader_wrapped';\n\n\nconst SessionLoading = () => (\n\t<div>\n\t\t<section className=\"hero is-light is-medium\">\n\t\t\t<div className=\"hero-body\">\n\t\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t\t<h1 className=\"title has-text-grey is-size-5-mobile\">loading...</h1>\n\t\t\t\t\t<BounceLoaderWrapper />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t</div>\n);\n\nexport default SessionLoading;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport NextRound from './next_round';\nimport BetweenRounds from './between_rounds';\nimport RoundFinished from './round_finished';\nimport SessionLoading from './session_loading';\n\n\nclass LiveSession extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tlet round = {};\n\t\tlet lastRound = {};\n\n\t\tlet allInstances = this.props.rounds.allRoundInstances;\n\t\tlet nextRoundIndexes = this.props.rounds.nextRoundIndexes;\n\n\t\tlet finishedRounds = (allInstances.length - nextRoundIndexes.length);\n\n\t\tif(nextRoundIndexes.length > 0){\n\t\t\t// we have an actual round object to pass down\n\t\t\tround = allInstances[nextRoundIndexes[0]];\n\t\t}\n\n\t\tlet justFinished = false;\n\n\t\tif(finishedRounds > 0){\n\t\t\t// let's see if a round has JUST finished\n\t\t\tlastRound = allInstances[finishedRounds - 1];\n\t\t\tjustFinished = lastRound.justFinished;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{ justFinished && <RoundFinished round={lastRound} />}\n\t\t\t\t{!justFinished &&\n\t\t\t\t<div>\n\t\t\t\t\t{ !this.props.initialLoadComplete &&\n\t\t\t\t\t\t<SessionLoading />\n\t\t\t\t\t}\n\n\t\t\t\t\t{(this.props.initialLoadComplete) &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{ nextRoundIndexes.length == 0 &&\n\t\t\t\t\t\t\t<BetweenRounds player={this.props.player}\n\t\t\t\t\t\t\t\tplayerStatus={this.props.playerStatus}\n\t\t\t\t\t\t\t\tsessionName={this.props.session.name}\n\t\t\t\t\t\t\t\tfinishedRounds={finishedRounds}\n\t\t\t\t\t\t\t\tisLoadingRounds={this.props.rounds.isLoading}\n\t\t\t\t\t\t\t\trounds={this.props.rounds.allRoundInstances}\n\t\t\t\t\t\t\t\tteams={this.props.session.teams}\n\t\t\t\t\t\t\t/> }\n\n\t\t\t\t\t\t{\t(nextRoundIndexes.length > 0) &&\n\t\t\t\t\t\t<NextRound round={ round }\n\t\t\t\t\t\t\tplayer={this.props.player}\n\t\t\t\t\t\t\tplayerStatus={this.props.playerStatus}\n\t\t\t\t\t\t\tsession={this.props.session} />\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t</div> }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nLiveSession.propTypes = {\n\tinitialLoadComplete: PropTypes.bool.isRequired,\n\trounds: PropTypes.object.isRequired,\n\tplayer: PropTypes.object.isRequired,\n\tsession: PropTypes.object.isRequired,\n\tplayerStatus: PropTypes.object.isRequired\n};\n\nexport default LiveSession;","import React from 'react';\nimport Giphy from '../shared/giphy';\nimport BounceLoaderWrapper from '../shared/bounce_loader_wrapped';\n\nconst AssigningTeam = () =>\n\t<section className=\"hero is-light is-medium\">\n\t\t<div className=\"hero-body\">\n\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t<h2 className=\"subtitle has-text-grey is-size-6-mobile  is-spaced\">new player detected</h2>\n\t\t\t\t<h1 className=\"title has-text-grey-dark is-size-5-mobile  is-spaced\">analysing your personality</h1>\n\t\t\t\t<progress className=\"progress is-primary\" value={Math.random() * 10} max={10}></progress>\n\t\t\t\t<BounceLoaderWrapper color=\"#dddddd\" />\n\t\t\t\t<Giphy tag={'thinking'} />\n\t\t\t</div>\n\t\t</div>\n\t</section>;\n\nexport default AssigningTeam;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Giphy from '../shared/giphy';\nimport BounceLoaderWrapper from '../shared/bounce_loader_wrapped';\n\n\nconst TeamAssigned = (props) =>\n\t<section className=\"hero is-dark is-medium\" style={{background: props.team.colour }}>\n\t\t<div className=\"hero-body\">\n\t\t\t<div className=\"content has-text-centered\">\n\t\t\t\t<h2 className=\"subtitle is-size-6-mobile is-spaced\">Congratulations!</h2>\n\t\t\t\t<h1 className=\"title is-size-5-mobile is-spaced\">You have been assigned to Team {props.team.name}</h1>\n\t\t\t\t<h2 className=\"subtitle is-size-5 is-size-6-mobile is-spaced\">joining now</h2>\n\t\t\t\t<BounceLoaderWrapper color = '#dddddd' />\n\t\t\t\t<Giphy tag={'celebration'} colour='light' />\n\t\t\t</div>\n\t\t</div>\n\t</section>;\n\nTeamAssigned.propTypes = {\n\tteam: PropTypes.object.isRequired\n};\n\nexport default TeamAssigned;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport WaitingForSession from './waiting_for_session';\nimport LiveSession from './live_session';\nimport AssigningTeam from './assigning_team';\nimport TeamAssigned from './team_assigned';\nimport moment from 'moment';\n\nclass Session extends Component {\n\n\trender() {\n\n\t\tlet showTeamAssignedUntil = this.props.showTeamAssignedScreenUntil;\n\t\tlet showTeamAssignedScreen = (showTeamAssignedUntil && moment().isBefore(showTeamAssignedUntil));\n\n\t\treturn (\n\t\t\t<section className=\"section\">\n\t\t\t\t{!this.props.player.team &&\n\t\t\t\t<AssigningTeam />\n\t\t\t\t}\n\t\t\t\t{ showTeamAssignedScreen && <TeamAssigned team={this.props.player.team} /> }\n\t\t\t\t{\n\t\t\t\t\t(!showTeamAssignedScreen && this.props.player.team) &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{ (this.props.session.isLive) &&\n\t\t\t\t\t\t\t<LiveSession initialLoadComplete={this.props.initialLoadComplete} session={this.props.session} player={this.props.player} rounds={this.props.rounds} playerStatus={this.props.playerStatus}/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ (!this.props.session.isLive) &&\n\t\t\t\t\t\t\t<WaitingForSession team={this.props.player.team} playerName={this.props.player.name} sessionName={this.props.session.name}/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nexport default Session;\n\nSession.propTypes = {\t\n\tshowTeamAssignedScreenUntil: PropTypes.object,\n\tinitialLoadComplete: PropTypes.bool.isRequired,\n\trounds: PropTypes.object.isRequired,\n\tsession: PropTypes.object.isRequired,\n\tplayer: PropTypes.object.isRequired,\n\tplayerStatus: PropTypes.object.isRequired\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\n\nclass SuccessIcon extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<span className={ this.props.position + ' icon is-small'}>\n\t\t\t\t{ this.props.success ? <FontAwesomeIcon icon={faCheck} style={{ color: 'green' }} /> : <FontAwesomeIcon icon={faTimes} style={{ color: 'red' }} />  }\n\t\t\t</span>\n\t\t);\n\t}\n}\n\nexport default SuccessIcon;\n\nSuccessIcon.propTypes = {\n\tsuccess: PropTypes.bool.isRequired,\n\tposition: PropTypes.string\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SuccessIcon from '../shared/success_icon';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSuperscript } from '@fortawesome/free-solid-svg-icons';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\n\nclass SessionForm extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n\t\tthis.onChangePlayerName = this.onChangePlayerName.bind(this);\n\t\tthis.onChangeSessionName = this.onChangeSessionName.bind(this);\n\t}\n\n\tonChangePlayerName(e) {\n\t\tthis.props.handleChange(\n\t\t\te.target.value,\n\t\t\tthis.props.sessionForm.sessionName\n\t\t);\n\t}\n\n\tonChangeSessionName(e) {\n\t\tthis.props.handleChange(\n\t\t\tthis.props.sessionForm.playerName,\n\t\t\te.target.value\n\t\t);\n\t}\n\n\tonSubmit(e) {\n\t\te.preventDefault();\n\t\tthis.props.handleSubmit();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<form className='panel' style={{ marginTop: '3rem' }}>\n\t\t\t\t<fieldset className='panel-block px-0'>\n\t\t\t\t\t<legend\n\t\t\t\t\t\tclassName='px-6 py-2 has-background-warning-light has-text-dark'\n\t\t\t\t\t\tstyle={{ width: '100%' }}>\n\t\t\t\t\t\tWelcome.\n\t\t\t\t\t</legend>\n\t\t\t\t\t<div className='px-4 pb-4'>\n\t\t\t\t\t\t<div className='field'>\n\t\t\t\t\t\t\t<label className='label' htmlFor='playerName'>\n\t\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<div className='control has-icons-left has-icons-right'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t(this.props.sessionForm\n\t\t\t\t\t\t\t\t\t\t\t.isPlayerNameValid\n\t\t\t\t\t\t\t\t\t\t\t? 'is-success'\n\t\t\t\t\t\t\t\t\t\t\t: 'is-warning') + ' input'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tid='playerName'\n\t\t\t\t\t\t\t\t\tplaceholder='Enter your name'\n\t\t\t\t\t\t\t\t\tvalue={this.props.sessionForm.playerName}\n\t\t\t\t\t\t\t\t\tonChange={this.onChangePlayerName}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className='icon is-small is-left'>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faUser} />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<SuccessIcon\n\t\t\t\t\t\t\t\t\tsuccess={\n\t\t\t\t\t\t\t\t\t\tthis.props.sessionForm.isPlayerNameValid\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tposition='is-right'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='field'>\n\t\t\t\t\t\t\t<label className='label' htmlFor='sessionName'>\n\t\t\t\t\t\t\t\tEntry Word\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<div className='control has-icons-left has-icons-right'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid='sessionName'\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t(this.props.sessionForm\n\t\t\t\t\t\t\t\t\t\t\t.isSessionNameValid\n\t\t\t\t\t\t\t\t\t\t\t? 'is-success'\n\t\t\t\t\t\t\t\t\t\t\t: 'is-warning') + ' input'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplaceholder='Enter the word for this session'\n\t\t\t\t\t\t\t\t\tvalue={this.props.sessionForm.sessionName}\n\t\t\t\t\t\t\t\t\tonChange={this.onChangeSessionName}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span className='icon is-small is-left'>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faSuperscript} />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<SuccessIcon\n\t\t\t\t\t\t\t\t\tsuccess={\n\t\t\t\t\t\t\t\t\t\tthis.props.sessionForm\n\t\t\t\t\t\t\t\t\t\t\t.isSessionNameValid\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tposition='is-right'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='field has-text-centered'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t(this.props.sessionForm.isValid\n\t\t\t\t\t\t\t\t\t\t? 'is-success'\n\t\t\t\t\t\t\t\t\t\t: 'is danger') +\n\t\t\t\t\t\t\t\t\t' button ' +\n\t\t\t\t\t\t\t\t\t(this.props.sessionForm.isSubmitting\n\t\t\t\t\t\t\t\t\t\t? 'is-loading'\n\t\t\t\t\t\t\t\t\t\t: '')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t!this.props.sessionForm.isValid ||\n\t\t\t\t\t\t\t\t\tthis.props.sessionForm.isSubmitting\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={this.onSubmit}>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\topacity: this.props.sessionForm\n\t\t\t\t\t\t\t\t\t\t\t.isSubmitting\n\t\t\t\t\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tEnter!\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t);\n\t}\n}\n\nSessionForm.propTypes = {\n\tsessionForm: PropTypes.object.isRequired,\n\thandleChange: PropTypes.func.isRequired,\n\thandleSubmit: PropTypes.func.isRequired,\n};\n\nexport default SessionForm;\n","const dev = true;\n\nconst config = {\n\tisDev: dev,\n\tsocket: {\n\t\tprotocol: dev ? 'http' : 'https',\n\t\tport: dev ? 4008 : 4008,\n\t\taddress: dev ? 'localhost' : 's.enhughesiasm.com',\n\t},\n\tquiz: {\n\t\tshowRoundFinishedScreenForMilliseconds: 5000,\n\t\tshowTeamAssignedScreenForSeconds: 4,\n\t\tassignTeamForMilliseconds: 3000,\n\t},\n};\n\nexport default config;\n","import React, { Component } from 'react';\nimport socketIOClient from 'socket.io-client';\nimport Session from './session';\nimport SessionForm from './session_form';\nimport moment from 'moment';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faCircleNotch } from '@fortawesome/free-solid-svg-icons';\nimport config from '../../config';\n\nclass QuizLogin extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet sessionForm = {\n\t\t\tplayerName: '',\n\t\t\tsessionName: '',\n\t\t\tpreviousSubmission: '',\n\t\t\tisSubmitting: false,\n\t\t\thasSubmitted: false,\n\t\t\tisValid: false,\n\t\t\tisSessionNameValid: false,\n\t\t\tisPlayerNameValid: false,\n\t\t};\n\n\t\tif (config.isDev) {\n\t\t\tsessionForm = {\n\t\t\t\tplayerName: 'Neil',\n\t\t\t\tsessionName: 'Biscuit',\n\t\t\t\tpreviousSubmission: '',\n\t\t\t\tisValid: true,\n\t\t\t\tisSessionNameValid: true,\n\t\t\t\tisPlayerNameValid: true,\n\t\t\t};\n\t\t}\n\n\t\tlet socketAddress =\n\t\t\tconfig.socket.protocol +\n\t\t\t'://' +\n\t\t\tconfig.socket.address +\n\t\t\t':' +\n\t\t\tconfig.socket.port;\n\n\t\tconst socket = socketIOClient(socketAddress);\n\n\t\tsocket.on(\n\t\t\t'connect',\n\t\t\t(() => {\n\t\t\t\t// happens on first connection, and on subsequent reconnections\n\t\t\t\t// so each time we want to register for events\n\t\t\t\t// (this will join or rejoin the server-side session room, if we have one)\n\t\t\t\tsocket.emit(\n\t\t\t\t\t'quiz connection',\n\t\t\t\t\tthis.state.session,\n\t\t\t\t\tthis.state.player\n\t\t\t\t);\n\t\t\t}).bind(this)\n\t\t);\n\n\t\t// then register for client events:\n\t\tsocket.on(\n\t\t\t'receive round instances',\n\t\t\t((instances) => {\n\t\t\t\tthis.setServerRoundInstances(instances);\n\t\t\t\tthis.getPlayerStatus();\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'receive question',\n\t\t\t((playerQuestion) => {\n\t\t\t\tthis.receiveQuestion(playerQuestion);\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'session flipped',\n\t\t\t((session) => {\n\t\t\t\tif (session && this.state.session) {\n\t\t\t\t\tthis.setState({ session: session });\n\t\t\t\t}\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'session ended',\n\t\t\t(() => {\n\t\t\t\tthis.reinitialiseState();\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'player deleted',\n\t\t\t(() => {\n\t\t\t\tthis.reinitialiseState();\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'receive player status',\n\t\t\t((status) => {\n\t\t\t\tthis.receivePlayerStatus(status);\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'receive team assignment',\n\t\t\t((playerId, team) => {\n\t\t\t\tthis.receiveTeamAssignment(playerId, team);\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'receive new team',\n\t\t\t((team) => {\n\t\t\t\tthis.receiveTeamReassignment(team);\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'no more questions',\n\t\t\t((roundInstanceId) => {\n\t\t\t\tlet ids = this.state.exhaustedRoundInstanceIds;\n\t\t\t\tids.push(roundInstanceId);\n\t\t\t\tthis.setState({ exhaustedRoundInstanceIds: ids });\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'disconnect',\n\t\t\t(() => {\n\t\t\t\tthis.forceUpdate();\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tlet rounds = {\n\t\t\tisLoading: false,\n\t\t\tserverRoundInstances: [],\n\t\t\tallRoundInstances: [],\n\t\t\tnextRoundIndexes: [],\n\t\t};\n\n\t\tthis.state = {\n\t\t\tinitial: {\n\t\t\t\tserverLoad: false,\n\t\t\t\tupdateAfterServerLoad: false,\n\t\t\t\tstatusAfterPlayerLoad: false,\n\t\t\t},\n\t\t\tsession: null,\n\t\t\tplayer: null,\n\t\t\tshowTeamAssignedScreenUntil: null,\n\t\t\tsessionForm: sessionForm,\n\t\t\tsocket: socket,\n\t\t\trounds: rounds,\n\t\t\tnextPlayerQuestion: null,\n\t\t\tanswerResponse: null,\n\t\t\texhaustedRoundInstanceIds: [],\n\t\t\tplayerStatus: {\n\t\t\t\tquestionsAnswered: 0,\n\t\t\t\tscore: 0,\n\t\t\t\tcorrectAnswers: 0,\n\t\t\t},\n\t\t\tstatusUpdateCounter: 0,\n\t\t};\n\n\t\tthis.handleSessionFormSubmit = this.handleSessionFormSubmit.bind(this);\n\t\tthis.handleSessionFormChange = this.handleSessionFormChange.bind(this);\n\t\tthis.isSessionFormValid = this.isSessionFormValid.bind(this);\n\t\tthis.isPlayerNameValid = this.isPlayerNameValid.bind(this);\n\t\tthis.isSessionNameValid = this.isSessionNameValid.bind(this);\n\n\t\tthis.loadRoundInstances = this.loadRoundInstances.bind(this);\n\t\tthis.updateRoundInstances = this.updateRoundInstances.bind(this);\n\t\tthis.setServerRoundInstances = this.setServerRoundInstances.bind(this);\n\n\t\tthis.getCurrentRoundScore = this.getCurrentRoundScore.bind(this);\n\n\t\tthis.reinitialiseState = this.reinitialiseState.bind(this);\n\n\t\tthis.pullNextQuestion = this.pullNextQuestion.bind(this);\n\t\tthis.receiveQuestion = this.receiveQuestion.bind(this);\n\t\tthis.submitAnswer = this.submitAnswer.bind(this);\n\t\tthis.receiveAnswerResponse = this.receiveAnswerResponse.bind(this);\n\t}\n\n\treinitialiseState() {\n\t\tlet rounds = {\n\t\t\tisLoading: false,\n\t\t\tserverRoundInstances: [],\n\t\t\tallRoundInstances: [],\n\t\t\tnextRoundIndexes: [],\n\t\t};\n\n\t\tthis.setState(function () {\n\t\t\treturn {\n\t\t\t\trounds: rounds,\n\t\t\t\tinitial: {\n\t\t\t\t\tserverLoad: false,\n\t\t\t\t\tupdateAfterServerLoad: false,\n\t\t\t\t\tstatusAfterPlayerLoad: false,\n\t\t\t\t},\n\t\t\t\tsession: null,\n\t\t\t\tplayer: null,\n\t\t\t\tshowTeamAssignedScreenUntil: null,\n\t\t\t\tnextPlayerQuestion: null,\n\t\t\t\tanswerResponse: null,\n\t\t\t\texhaustedRoundInstanceIds: [],\n\t\t\t\tplayerStatus: {\n\t\t\t\t\tquestionsAnswered: 0,\n\t\t\t\t\tscore: 0,\n\t\t\t\t\tcorrectAnswers: 0,\n\t\t\t\t},\n\t\t\t\tstatusUpdateCounter: 0,\n\t\t\t};\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.timerID = setInterval(() => this.tick(), 900);\n\t\tthis.loadRoundInstances();\n\t\tthis.getPlayerStatus();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timerID);\n\t}\n\n\ttick() {\n\t\t// this checks if the server instances have changed\n\t\t// and also updates the rounds with 'time left' etc, so the round starts/ends in time\n\t\tthis.updateRoundInstances(this.state.rounds.serverRoundInstances);\n\n\t\tlet counter = this.state.statusUpdateCounter;\n\n\t\tif (\n\t\t\tcounter > 15 ||\n\t\t\t(!this.state.initial.statusAfterPlayerLoad && this.state.player)\n\t\t) {\n\t\t\t// check the player status every now and then\n\t\t\tthis.getPlayerStatus();\n\n\t\t\t// update round instances every now and then in case we weren't online when the change notification fired\n\t\t\tthis.loadRoundInstances();\n\t\t\tcounter = 0;\n\t\t}\n\n\t\tcounter++;\n\t\tthis.setState({ statusUpdateCounter: counter });\n\t}\n\n\tisRoundLive(round) {\n\t\tvar now = moment();\n\t\tvar startTime = moment(round.startTime);\n\t\tvar endTime = moment(round.endTime);\n\t\treturn startTime.isBefore(now) && now.isBefore(endTime);\n\t}\n\n\tgetSecondsRemainingBeforeRoundStart(round) {\n\t\tvar now = moment();\n\t\tvar start = moment(round.startTime);\n\t\treturn start.diff(now, 'seconds');\n\t}\n\n\tgetPlayerStatus() {\n\t\tif (this.state.session && this.state.player) {\n\t\t\tthis.state.socket.emit(\n\t\t\t\t'pull player status',\n\t\t\t\tthis.state.session.id,\n\t\t\t\tthis.state.player.id\n\t\t\t);\n\t\t}\n\t}\n\n\treceivePlayerStatus(status) {\n\t\tlet initial = this.state.initial;\n\t\tinitial.statusAfterPlayerLoad = true;\n\n\t\tthis.setState({\n\t\t\tplayerStatus: status,\n\t\t\tinitial: initial,\n\t\t});\n\t}\n\n\tloadRoundInstances(sessionId) {\n\t\tif (\n\t\t\t!sessionId &&\n\t\t\tthis.state.session &&\n\t\t\tthis.state.session.id &&\n\t\t\tNumber.isInteger(this.state.session.id)\n\t\t) {\n\t\t\tsessionId = this.state.session.id;\n\t\t}\n\n\t\tif (!sessionId) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet rounds = this.state.rounds;\n\t\trounds.isLoading = true;\n\t\tthis.setState({ rounds: rounds });\n\t\tthis.state.socket.emit('pull round instances', sessionId);\n\t}\n\n\tsetServerRoundInstances(instances) {\n\t\tinstances.sort(function (i1, i2) {\n\t\t\tlet s1 = moment(i1.startTime);\n\t\t\tlet s2 = moment(i2.startTime);\n\t\t\treturn s1.isBefore(s2) ? -1 : s1.isAfter(s2) ? 1 : 0;\n\t\t});\n\n\t\tlet rounds = this.state.rounds;\n\t\trounds.serverRoundInstances = instances;\n\n\t\tlet initial = this.state.initial;\n\t\tinitial.serverLoad = true;\n\n\t\tthis.setState(function () {\n\t\t\treturn {\n\t\t\t\trounds: rounds,\n\t\t\t\tinitial: initial,\n\t\t\t};\n\t\t});\n\t}\n\n\tpullNextQuestion(round) {\n\t\tif (round && round.id) {\n\t\t\tlet rounds = this.state.rounds;\n\t\t\trounds.allRoundInstances.forEach((r) => {\n\t\t\t\tr.playerQuestion = null;\n\t\t\t});\n\n\t\t\tthis.setState(function () {\n\t\t\t\treturn {\n\t\t\t\t\trounds: rounds,\n\t\t\t\t\tnextPlayerQuestion: null,\n\t\t\t\t\tanswerResponse: null,\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.state.socket.emit(\n\t\t\t\t'pull question',\n\t\t\t\tround.id,\n\t\t\t\tround.platonicRoundIds,\n\t\t\t\tthis.state.player.id\n\t\t\t);\n\t\t}\n\t}\n\n\treceiveQuestion(playerQuestion) {\n\t\tif (playerQuestion && playerQuestion.roundInstanceId) {\n\t\t\tthis.setState({ nextPlayerQuestion: playerQuestion });\n\t\t}\n\t}\n\n\tsubmitAnswer(round, answerIndex) {\n\t\tif (round && round.id && Number.isInteger(answerIndex)) {\n\t\t\tthis.state.socket.emit(\n\t\t\t\t'answer question',\n\t\t\t\tround.playerQuestion.id,\n\t\t\t\tanswerIndex,\n\t\t\t\tthis.state.player.id,\n\t\t\t\t(response) => this.receiveAnswerResponse(response)\n\t\t\t);\n\t\t} else {\n\t\t\talert('yikes! unable to submit answer: ' + answerIndex);\n\t\t}\n\t}\n\n\tgetCurrentRoundScore(roundInstanceId) {\n\t\tlet score = 0;\n\t\tlet status = this.state.playerStatus;\n\t\tif (\n\t\t\tstatus &&\n\t\t\tstatus.scoresByRoundInstanceId &&\n\t\t\tstatus.scoresByRoundInstanceId.length > 0\n\t\t) {\n\t\t\tlet scoreByRoundId = this.state.playerStatus.scoresByRoundInstanceId.filter(\n\t\t\t\t(a) => a[0] == roundInstanceId\n\t\t\t);\n\t\t\tif (\n\t\t\t\tscoreByRoundId &&\n\t\t\t\tscoreByRoundId.length > 0 &&\n\t\t\t\tscoreByRoundId[0][1]\n\t\t\t) {\n\t\t\t\tscore = parseInt(scoreByRoundId[0][1]);\n\t\t\t}\n\t\t}\n\n\t\treturn score;\n\t}\n\n\treceiveAnswerResponse(response) {\n\t\tthis.getPlayerStatus();\n\t\tthis.setState({ answerResponse: response });\n\t}\n\n\tformatRoundNames(names) {\n\t\tif (!names) return '';\n\n\t\tvar outStr = '';\n\t\tif (names.length === 1) {\n\t\t\toutStr = names[0];\n\t\t} else if (names.length === 2) {\n\t\t\toutStr = names.join(' & ');\n\t\t} else if (names.length > 2) {\n\t\t\toutStr = names.slice(0, -1).join(', ') + ', & ' + names.slice(-1);\n\t\t}\n\t\treturn outStr;\n\t}\n\n\tupdateRoundInstances(instances) {\n\t\t// TODO: major refactoring, this SUCKS!\n\t\tinstances = instances || [];\n\n\t\tlet allInstances = [...instances];\n\n\t\tlet nextRoundIndexes = [];\n\n\t\tlet now = moment();\n\n\t\tallInstances.forEach(\n\t\t\t((instance, i) => {\n\t\t\t\tinstance.secondsRemaining = this.getSecondsRemainingBeforeRoundStart(\n\t\t\t\t\tinstance\n\t\t\t\t);\n\t\t\t\tinstance.isLive = this.isRoundLive(instance);\n\t\t\t\tinstance.pullNextQuestion = this.pullNextQuestion;\n\t\t\t\tinstance.submitAnswer = this.submitAnswer;\n\n\t\t\t\tinstance.name = this.formatRoundNames(\n\t\t\t\t\tinstance.platonicRoundNames\n\t\t\t\t);\n\n\t\t\t\tinstance.exhausted = false;\n\t\t\t\tif (\n\t\t\t\t\tthis.state.exhaustedRoundInstanceIds.indexOf(instance.id) >=\n\t\t\t\t\t0\n\t\t\t\t) {\n\t\t\t\t\tinstance.exhausted = true;\n\t\t\t\t}\n\n\t\t\t\tinstance.justFinished = false;\n\t\t\t\tlet endTime = moment(instance.endTime);\n\t\t\t\tinstance.millisecondsSinceRoundEnd = moment().diff(endTime);\n\n\t\t\t\tif (\n\t\t\t\t\tinstance.millisecondsSinceRoundEnd > 0 &&\n\t\t\t\t\tinstance.millisecondsSinceRoundEnd <\n\t\t\t\t\t\tconfig.quiz.showRoundFinishedScreenForMilliseconds\n\t\t\t\t) {\n\t\t\t\t\tinstance.justFinished = true;\n\t\t\t\t}\n\n\t\t\t\tif (now.isBefore(endTime)) {\n\t\t\t\t\tnextRoundIndexes.push(i);\n\t\t\t\t}\n\n\t\t\t\tif (this.state.nextPlayerQuestion) {\n\t\t\t\t\t// we've loaded a question, now add it to the relevant round\n\t\t\t\t\tif (\n\t\t\t\t\t\tinstance.id ==\n\t\t\t\t\t\tthis.state.nextPlayerQuestion.roundInstanceId\n\t\t\t\t\t) {\n\t\t\t\t\t\tinstance.playerQuestion = this.state.nextPlayerQuestion;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.state.answerResponse &&\n\t\t\t\t\t\t\tthis.state.answerResponse.roundInstanceId ==\n\t\t\t\t\t\t\t\tinstance.id\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tinstance.playerQuestion.answerReceived = true;\n\t\t\t\t\t\t\tinstance.playerQuestion.submittedIndex = this.state.answerResponse.submittedIndex;\n\t\t\t\t\t\t\tinstance.playerQuestion.correctIndex = this.state.answerResponse.correctIndex;\n\t\t\t\t\t\t\tinstance.playerQuestion.pointsEarned = this.state.answerResponse.pointsEarned;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tinstance.playerQuestion = null;\n\t\t\t\t}\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tlet rounds = this.state.rounds;\n\t\trounds.allRoundInstances = allInstances;\n\t\trounds.nextRoundIndexes = nextRoundIndexes;\n\t\trounds.isLoading = false;\n\n\t\tlet initial = this.state.initial;\n\n\t\tif (initial.serverLoad) {\n\t\t\tinitial.updateAfterServerLoad = true;\n\t\t}\n\n\t\tthis.setState(function () {\n\t\t\treturn {\n\t\t\t\trounds: rounds,\n\t\t\t\tinitial: initial,\n\t\t\t};\n\t\t});\n\t}\n\n\treceiveTeamReassignment(newTeam) {\n\t\tif (newTeam) {\n\t\t\tlet player = this.state.player;\n\t\t\tplayer.team = newTeam;\n\t\t\tthis.setState(function () {\n\t\t\t\treturn {\n\t\t\t\t\tplayer: player,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t}\n\n\treceiveTeamAssignment(playerId, team) {\n\t\tlet player = this.state.player;\n\t\tplayer.team = team;\n\t\tlet showScreenUntil = moment().add(\n\t\t\tconfig.quiz.showTeamAssignedScreenForSeconds,\n\t\t\t's'\n\t\t);\n\t\tthis.setState(function () {\n\t\t\treturn {\n\t\t\t\tplayer: player,\n\t\t\t\tshowTeamAssignedScreenUntil: showScreenUntil,\n\t\t\t};\n\t\t});\n\t}\n\n\thandleSessionFormSubmit() {\n\t\tthis.setState({\n\t\t\tsessionForm: { ...this.state.sessionForm, isSubmitting: true },\n\t\t});\n\t\tconst playerName = this.state.sessionForm.playerName;\n\t\tconst sessionName = this.state.sessionForm.sessionName;\n\t\tif (this.isSessionFormValid(playerName, sessionName)) {\n\t\t\tvar submission = JSON.stringify({\n\t\t\t\tplayerName: playerName,\n\t\t\t\tsessionName: sessionName,\n\t\t\t});\n\t\t\tthis.state.socket.emit('join session', submission, (result) => {\n\t\t\t\tif (result.session && result.session.id) {\n\t\t\t\t\tthis.loadRoundInstances(result.session.id);\n\n\t\t\t\t\tif (!result.player.team) {\n\t\t\t\t\t\t// not yet team assigned, request team assignment in a few seconds\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.state.socket.emit(\n\t\t\t\t\t\t\t\t'assign team',\n\t\t\t\t\t\t\t\tresult.player.id\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}, config.quiz.assignTeamForMilliseconds); // 7500);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tsession: result.session,\n\t\t\t\t\tplayer: result.player,\n\t\t\t\t\tsessionForm: {\n\t\t\t\t\t\t...this.state.sessionForm,\n\t\t\t\t\t\tisSubmitting: false,\n\t\t\t\t\t\thasSubmitted: true,\n\t\t\t\t\t\tpreviousSubmission: sessionName,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\thandleSessionFormChange(playerName, sessionName) {\n\t\tthis.setState({\n\t\t\tsessionForm: {\n\t\t\t\tplayerName: playerName,\n\t\t\t\tsessionName: sessionName,\n\t\t\t\tisPlayerNameValid: this.isPlayerNameValid(playerName),\n\t\t\t\tisSessionNameValid: this.isSessionNameValid(sessionName),\n\t\t\t\tisValid: this.isSessionFormValid(playerName, sessionName),\n\t\t\t},\n\t\t});\n\t}\n\n\tisSessionNameValid(sessionName) {\n\t\treturn sessionName && sessionName.length >= 5;\n\t}\n\n\tisPlayerNameValid(playerName) {\n\t\treturn playerName && playerName.length >= 3;\n\t}\n\n\tisSessionFormValid(playerName, sessionName) {\n\t\treturn (\n\t\t\tthis.isSessionNameValid(sessionName) &&\n\t\t\tthis.isPlayerNameValid(playerName)\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<section className='section is-paddingless'>\n\t\t\t\t{this.state.session && (\n\t\t\t\t\t<Session\n\t\t\t\t\t\tshowTeamAssignedScreenUntil={\n\t\t\t\t\t\t\tthis.state.showTeamAssignedScreenUntil\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinitialLoadComplete={\n\t\t\t\t\t\t\tthis.state.initial.updateAfterServerLoad &&\n\t\t\t\t\t\t\tthis.state.initial.statusAfterPlayerLoad\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsession={this.state.session}\n\t\t\t\t\t\tplayer={this.state.player}\n\t\t\t\t\t\trounds={this.state.rounds}\n\t\t\t\t\t\tplayerStatus={this.state.playerStatus}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{!this.state.session && (\n\t\t\t\t\t<SessionForm\n\t\t\t\t\t\tsessionForm={this.state.sessionForm}\n\t\t\t\t\t\thandleChange={this.handleSessionFormChange}\n\t\t\t\t\t\thandleSubmit={this.handleSessionFormSubmit}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{this.state.sessionForm.hasSubmitted && !this.state.session && (\n\t\t\t\t\t<div className='notification is-warning'>\n\t\t\t\t\t\tSorry,{' '}\n\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t{this.state.sessionForm.previousSubmission}\n\t\t\t\t\t\t</strong>{' '}\n\t\t\t\t\t\tis not currently a valid session.\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<div className='has-text-centered'>\n\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\tthis.state.socket.connected\n\t\t\t\t\t\t\t\t? faCircle\n\t\t\t\t\t\t\t\t: faCircleNotch\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: this.state.socket.connected\n\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t: 'red',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nQuizLogin.propTypes = {};\n\nexport default QuizLogin;\n","import React from 'react';\n\nconst QuizExplanation = () => (\n\t<article className='message is-info' style={{ marginTop: '2rem' }}>\n\t\t<div className='message-header'>\n\t\t\t<p>What is this?</p>\n\t\t</div>\n\t\t<div className='message-body'>\n\t\t\tThis part of the site is for{' '}\n\t\t\t<strong>live interactive experiences</strong>.\n\t\t\t<p>\n\t\t\t\tIf you&apos;re attending a live session, enter your{' '}\n\t\t\t\t<strong>name</strong> and the <strong>entry word</strong> above,\n\t\t\t\tand enjoy!\n\t\t\t</p>\n\t\t</div>\n\t</article>\n);\n\nexport default QuizExplanation;\n","import React from 'react';\nimport Header from '../shared/header';\nimport Footer from '../shared/footer';\nimport QuizLogin from './quiz_login';\nimport QuizExplanation from './quiz_explanation';\n\nconst Quiz = () => <div>\n\t<Header />\n\t<div id=\"wrapper\" className=\"columns\" style={{padding:'0 20px'}}>\n\t\t<div className=\"column is-half is-offset-one-quarter\">\n\t\t\t<QuizLogin />\n\t\t\t<QuizExplanation />\n\t\t</div>\n\t</div>\n\t<Footer />\n</div>;\n\nexport default Quiz;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst LiveTag = (props) =>\n\t<span className={ (props.isLive ? 'is-success' : 'is-danger') + ' tag'} style={{marginLeft:'5px', marginRight: '5px'}}>\n\t\t{ props.isLive ? '-  -  LIVE  -  -' : 'NOT LIVE'}\n\t</span>;\n\nLiveTag.propTypes = {\n\tisLive: PropTypes.bool.isRequired\n};\n\nexport default LiveTag;","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport LiveTag from './live_tag';\nimport moment from 'moment';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nexport default class SessionTable extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.onDeleteSessionClicked = this.onDeleteSessionClicked.bind(this);\n\t}\n\n\tonDeleteSessionClicked(session){\n\t\tconfirmAlert({\n\t\t\ttitle: 'Are you sure?',\n\t\t\tmessage: 'You want to wipe out ' + session.name + '?',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\tonClick: () => this.props.handleDeleteSession(session.id)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: null\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\n\trender(){\n\t\treturn(\n\t\t\t<table className=\"table\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>-</th>\n\t\t\t\t\t\t<th>ID</th>\n\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t<th>Live?</th>\n\t\t\t\t\t\t<th>Players (Connected)</th>\n\t\t\t\t\t\t<th style={{color: 'orange'}}>Orange</th>\n\t\t\t\t\t\t<th style={{color: 'purple'}}>Purple</th>\n\t\t\t\t\t\t<th style={{color: 'grey'}}>None</th>\n\t\t\t\t\t\t<th>Rounds (Completed)</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.sessions.map((session,i) =>\n\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t<td><a onClick={() => this.onDeleteSessionClicked(session)}>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTrash} style={{color: 'black'}}/>\n\t\t\t\t\t\t\t\t</a></td>\n\t\t\t\t\t\t\t\t<td><a onClick={() => this.props.handleSelectSession(session.id)}>{session.id}</a></td>\n\t\t\t\t\t\t\t\t<td><a onClick={() => this.props.handleSelectSession(session.id)}>{session.name}</a></td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<button className=\"button is-info\" onClick={() => this.props.handleFlipSessionLive(session.id)}>Flip</button>\n\t\t\t\t\t\t\t\t\t<LiveTag isLive={session.isLive} />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{ session.players.length } ({ session.players.filter(n => n.isConnected).length })\n\t\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t\t{/* TODO: yup, this is dumb, but I am currently guaranteeing team_ids to be either 1, 2 or null and I'm in a real hurry here! -->\n\t\t\t\t\t\t\t\t\tif I decide to implement more than these two teams this will need to be more clever, iterating over a list of teams, or similar */}\n\t\t\t\t\t\t\t\t<td style={{color:'orange'}}>\n\t\t\t\t\t\t\t\t\t{ session.players.filter(function(p){return p.teamId == 1;}).length }\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{color:'purple'}}>\n\t\t\t\t\t\t\t\t\t{ session.players.filter(function(p){return p.teamId == 2;}).length }\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td style={{color:'grey'}}>\n\t\t\t\t\t\t\t\t\t{ session.players.filter(function(p){return p.teamId == null;}).length }\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{ session.roundInstances.length } ({ session.roundInstances.filter(ri => ri != null && ri.endTime != null && moment(ri.endTime).isBefore(moment())).length })\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t)}\n\t\t\t\t</tbody>\n\t\t\t</table>);\n\t}\n}\n\nSessionTable.propTypes = {\n\tsessions: PropTypes.array.isRequired,\n\thandleSelectSession: PropTypes.func.isRequired,\n\thandleDeleteSession: PropTypes.func.isRequired,\n\thandleFlipSessionLive: PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\n\nconst PlayerTeam = (props) => {\n\tlet teamName = 'None';\n\tlet colour = '#ddd';\n\n\tif(props.teamId){\n\t\tlet team = props.teams.find(t => t.id == props.teamId);\n\t\tif(team){\n\t\t\tteamName = team.name;\n\t\t\tcolour = team.colour;\n\t\t}\n\t}\n\n\treturn(\n\t\t<span style={{color: colour}}>{teamName}</span>\n\t);};\n\nPlayerTeam.propTypes = {\n\tteams: PropTypes.array.isRequired,\n\tteamId: PropTypes.number\n};\n\nexport default PlayerTeam;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PlayerTeam from './player_team';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\n\nexport default class PlayerTable extends Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.handleFlipTeam = this.handleFlipTeam.bind(this);\n\t}\n\n\thandleFlipTeam(player){\n\t\tconfirmAlert({\n\t\t\ttitle: 'Are you sure?',\n\t\t\tmessage: 'You want to flip the team for ' + player.name + '?',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\tonClick: () => this.props.handleFlipTeam(player)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: null\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tonDeletePlayerClicked(player){\n\t\tconfirmAlert({\n\t\t\ttitle: 'Are you sure?',\n\t\t\tmessage: 'You want to ***DELETE*** ' + player.name + '?',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\tonClick: () => this.props.handleDeletePlayer(player.id)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: null\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<table className=\"table content has-text-centered is-striped is-narrow is-hoverable\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>-</th>\n\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t<th>Team</th>\n\t\t\t\t\t\t<th>-</th>\n\t\t\t\t\t\t<th>Questions Asked</th>\n\t\t\t\t\t\t<th>Questions Answered</th>\n\t\t\t\t\t\t<th>Correct Answers</th>\n\t\t\t\t\t\t<th>Correct Percentage</th>\n\t\t\t\t\t\t<th>Total Score</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{ this.props.players.map((player, i) =>\n\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t<td><a onClick={() => this.onDeletePlayerClicked(player)}>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTrash} style={{color: 'black'}}/>\n\t\t\t\t\t\t\t</a></td>\n\t\t\t\t\t\t\t<td className={ 'has-text-weight-bold has-text-' + (player.isConnected ? 'success' : 'danger')}>\n\t\t\t\t\t\t\t\t{player.name}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td className='has-text-weight-bold'>\n\t\t\t\t\t\t\t\t<PlayerTeam teamId={player.teamId} teams={this.props.teams} />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{player.teamId &&\n\t\t\t\t\t\t\t\t<button className=\"button is-info\" onClick={() => this.handleFlipTeam(player)}>\n\t\t\t\t\t\t\t\t\tFlip Team\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{player.totalQuestions}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{player.answeredQuestions}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{player.correctAnswers}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{ player.answeredQuestions != 0 ? Math.round(100 * (player.correctAnswers / player.answeredQuestions)) + '%' : 'N/A'}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{player.totalScore}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t)}\n\t\t\t\t</tbody>\n\t\t\t</table>);\n\t}\n\n}\n\nPlayerTable.propTypes = {\n\tplayers: PropTypes.array.isRequired,\n\tteams: PropTypes.array.isRequired,\n\thandleFlipTeam: PropTypes.func.isRequired,\n\thandleDeletePlayer: PropTypes.func.isRequired\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport LiveTag from './live_tag';\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\nimport PlayerTable from './player_table';\n\n\nclass SessionAdmin extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {selectedRoundLength: 30,\n\t\t\tselectedRoundDelay: 5,\n\t\t\tselectedWrongAnswerFactor: -1,\n\t\t\tinputPointsPerQuestion: 10,\n\t\t\tisLoadingPreviousRounds: false,\n\t\t\tselectedPlatonicRoundIds: []};\n\n\n\t\tthis.handleRoundLengthChange = this.handleRoundLengthChange.bind(this);\n\t\tthis.handleRoundDelayChange = this.handleRoundDelayChange.bind(this);\n\t\tthis.handlePointsPerQuestionChange = this.handlePointsPerQuestionChange.bind(this);\n\t\tthis.handleWrongAnswerFactorChange = this.handleWrongAnswerFactorChange.bind(this);\n\n\t\tthis.onSubmitNewRound = this.onSubmitNewRound.bind(this);\n\t\tthis.onClickStartRound = this.onClickStartRound.bind(this);\n\t\tthis.newRoundIsValid = this.newRoundIsValid.bind(this);\n\t\tthis.platonicRoundLabelClicked = this.platonicRoundLabelClicked.bind(this);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.timerID = setInterval(() => this.tick(), 2500);\n\t}\n\n\tcomponentWillUnmount(){\n\t\tclearInterval(this.timerID);\n\t}\n\n\ttick(){\n\t\tthis.forceUpdate();\n\t}\n\n\tnewRoundIsValid(){\n\t\treturn Number.isInteger(this.state.inputPointsPerQuestion) &&\n\t\t\t\tthis.state.selectedPlatonicRoundIds.length > 0  &&\n\t\t\t\t!Number.isNaN(this.state.selectedRoundLength) && this.state.selectedRoundLength > 0 && this.state.selectedRoundLength < 60;\n\t}\n\n\tonClickStartRound(){\n\n\t\tif(this.newRoundIsValid()){\n\n\t\t\tvar roundName = '';\n\n\t\t\tthis.state.selectedPlatonicRoundIds.forEach(prid => {\n\t\t\t\troundName += this.props.platonicRounds.filter(n => n.id == prid)[0].name + ' / ';\n\t\t\t});\n\n\t\t\tconfirmAlert({\n\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\tmessage: 'You want to start a round of ' + roundName.toString().toUpperCase() + ' for ' + this.state.selectedRoundLength + ' minutes, ' + ' starting in ' + this.state.selectedRoundDelay + ' seconds?',\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\t\tonClick: () => this.onSubmitNewRound()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: 'No',\n\t\t\t\t\t\tonClick: null\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t}\n\n\tplatonicRoundLabelClicked(prid){\n\t\tlet ids =  this.state.selectedPlatonicRoundIds;\n\t\tlet index = ids.indexOf(prid);\n\t\tif(ids.indexOf(prid) >= 0){\n\t\t\tids.splice(index, 1);\n\t\t}else{\n\t\t\tids.push(prid);\n\t\t}\n\t\tthis.setState({ selectedPlatonicRoundIds: ids });\n\t}\n\n\n\thandleRoundLengthChange(e){\n\n\t\tthis.setState({ selectedRoundLength: parseFloat(e.target.value) });\n\t}\n\n\thandleRoundDelayChange(e){\n\t\tthis.setState({ selectedRoundDelay: parseInt(e.target.value) });\n\t}\n\n\thandleWrongAnswerFactorChange(e){\n\t\tthis.setState({ selectedWrongAnswerFactor: parseInt(e.target.value)});\n\t}\n\n\thandlePointsPerQuestionChange(e){\n\t\ttry{\n\t\t\tlet v = parseInt(e.target.value);\n\t\t\tthis.setState({ inputPointsPerQuestion: v });\n\t\t}catch(ex){\n\t\t\t// do literally nothing, only I will ever use this page\n\t\t}\n\t}\n\n\tonSubmitNewRound(){\n\n\t\tlet now = moment();\n\t\tlet startTime = now.add(this.state.selectedRoundDelay, 's');\n\t\tstartTime.add(5, 's');\n\t\tlet startTimeFormatted = startTime.utc().format();\n\t\tlet endTime = startTime.add(this.state.selectedRoundLength, 'm');\n\t\tlet endTimeFormatted = endTime.utc().format();\n\n\t\tvar newRoundInstance = {\n\t\t\tstartTime: startTimeFormatted,\n\t\t\tendTime: endTimeFormatted,\n\t\t\tplatonicRoundIds: this.state.selectedPlatonicRoundIds,\n\t\t\tsessionId: this.props.session.id,\n\t\t\tpointsPerQuestion: this.state.inputPointsPerQuestion,\n\t\t\twrongAnswerFactor: this.state.selectedWrongAnswerFactor\n\t\t};\n\n\t\tthis.props.handleSubmitNewRound(newRoundInstance);\n\t}\n\n\n\tisLive(startTime, endTime){\n\t\tconst now = moment();\n\t\treturn now.isAfter(startTime) && now.isBefore(endTime);\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className=\"notification\">\n\t\t\t\t\t<a onClick={()=> this.props.handleSelectSession(null)}>Go Back</a>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"box\">\n\t\t\t\t\t<h2 className=\"subtitle\" style={{display:'inline-block'}}>Session { this.props.session.id } : {this.props.session.name}</h2>\n\t\t\t\t\t<LiveTag isLive={this.props.session.isLive} />\n\t\t\t\t\t<button className=\"button is-info\" onClick={() => this.props.handleFlipSessionLive(this.props.session.id)}>Flip</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"box\">\n\t\t\t\t\t<PlayerTable handleDeletePlayer={this.props.handleDeletePlayer} handleFlipTeam={this.props.handleFlipTeam} players={this.props.session.players} teams={this.props.teams} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"box\">\n\t\t\t\t\t<h2 className=\"subtitle\">Previous Rounds</h2>\n\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>-</th>\n\t\t\t\t\t\t\t\t<th>Number</th>\n\t\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t\t<th>PPQ</th>\n\t\t\t\t\t\t\t\t<th>Start</th>\n\t\t\t\t\t\t\t\t<th>End</th>\n\t\t\t\t\t\t\t\t<th>Questions Asked</th>\n\t\t\t\t\t\t\t\t<th>Questions Answered</th>\n\t\t\t\t\t\t\t\t<th>Correct Answers</th>\n\t\t\t\t\t\t\t\t<th>Correct Percentage</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{ this.props.session.roundInstances && this.props.session.roundInstances.length > 0 && this.props.session.roundInstances.map((round, i) =>\n\t\t\t\t\t\t\t\t<tr key={i} className={ (this.isLive(round.startTime, round.endTime) ? 'has-background-success' : 'has-background-warning')} >\n\t\t\t\t\t\t\t\t\t<td><a onClick={() => this.props.handleDeleteRoundInstance(round.id)}>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTrash} style={{color: 'black'}}/>\n\t\t\t\t\t\t\t\t\t</a></td>\n\t\t\t\t\t\t\t\t\t<td className=\"has-text-centered\">{i + 1}</td>\n\t\t\t\t\t\t\t\t\t<td>{ round.platonicRounds.map(pr => pr.name).join('/') }</td>\n\t\t\t\t\t\t\t\t\t<td>{round.pointsPerQuestion}</td>\n\t\t\t\t\t\t\t\t\t<td><Moment format=\"HH:mm:ss\">{round.startTime}</Moment></td>\n\t\t\t\t\t\t\t\t\t<td><Moment format=\"HH:mm:ss\">{round.endTime}</Moment></td>\n\t\t\t\t\t\t\t\t\t<td className=\"has-text-centered\"> {round.questionsAsked ? round.questionsAsked : '0'} </td>\n\t\t\t\t\t\t\t\t\t<td className=\"has-text-centered\"> {round.questionsAnswered ? round.questionsAnswered : '0'} </td>\n\t\t\t\t\t\t\t\t\t<td className=\"has-text-centered\"> {round.correctAnswers ? round.correctAnswers : '0'} </td>\n\t\t\t\t\t\t\t\t\t<td className=\"has-text-centered\"> {round.questionsAnswered && round.correctAnswers ? Math.round(100 * (round.correctAnswers / round.questionsAnswered)) + '%' : 'N/A'} </td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"box\">\n\t\t\t\t\t<h3 className=\"has-text-bold is-size-4\">Create New Round: </h3>\n\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.props.platonicRounds.map((pr, i) =>\n\t\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<label onClick={() => this.platonicRoundLabelClicked(pr.id) } className={'checkbox ' + (pr.parseAsMaths ? 'has-text-info' : '')} htmlFor={'checkbox' + pr.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t<input style={{marginRight: '5px'}} type=\"checkbox\" name={'checkbox' + pr.name} value={pr.id} checked={(this.state.selectedPlatonicRoundIds.indexOf(pr.id) >= 0)} />\n\t\t\t\t\t\t\t\t\t\t\t\t{pr.name}\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"roundLength\" className=\"label\">Length: </label>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th><select id=\"roundLength\" value={this.state.selectedRoundLength} onChange={this.handleRoundLengthChange}>\n\t\t\t\t\t\t\t\t\t<option value={0.1}>6 seconds</option>\n\t\t\t\t\t\t\t\t\t<option value={0.25}>15 seconds</option>\n\t\t\t\t\t\t\t\t\t<option value={1}>1</option>\n\t\t\t\t\t\t\t\t\t<option value={2}>2</option>\n\t\t\t\t\t\t\t\t\t<option value={5}>5</option>\n\t\t\t\t\t\t\t\t\t<option value={8}>8</option>\n\t\t\t\t\t\t\t\t\t<option value={10}>10</option>\n\t\t\t\t\t\t\t\t\t<option value={12}>12</option>\n\t\t\t\t\t\t\t\t\t<option value={15}>15</option>\n\t\t\t\t\t\t\t\t\t<option value={15}>20</option>\n\t\t\t\t\t\t\t\t\t<option value={15}>25</option>\n\t\t\t\t\t\t\t\t\t<option value={30}>30</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<span style={{marginLeft: '5px'}}>minutes</span>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th><label htmlFor=\"roundDelay\" className=\"label\">Starting in: </label></th>\n\t\t\t\t\t\t\t\t<th><select id=\"roundDelay\" value={this.state.selectedRoundDelay} onChange={this.handleRoundDelayChange}>\n\t\t\t\t\t\t\t\t\t<option value={5}>5</option>\n\t\t\t\t\t\t\t\t\t<option value={10}>10</option>\n\t\t\t\t\t\t\t\t\t<option value={15}>15</option>\n\t\t\t\t\t\t\t\t\t<option value={15}>20</option>\n\t\t\t\t\t\t\t\t\t<option value={30}>30</option>\n\t\t\t\t\t\t\t\t\t<option value={60}>60</option>\n\t\t\t\t\t\t\t\t\t<option value={600}>600</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<span style={{marginLeft: '5px'}}>seconds</span>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th><label htmlFor=\"wrongAnswerFactor\" className=\"label\">Wrong Answer Multiplication Factor </label></th>\n\t\t\t\t\t\t\t\t<th><select id=\"wrongAnswerFactor\" value={this.state.selectedWrongAnswerFactor} onChange={this.handleWrongAnswerFactorChange}>\n\t\t\t\t\t\t\t\t\t<option value={0}>0</option>\n\t\t\t\t\t\t\t\t\t<option value={-1}>-1</option>\n\t\t\t\t\t\t\t\t\t<option value={-2}>-2</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"pointsPerQuestion\" className=\"label\">Points Per Question: </label></th>\n\t\t\t\t\t\t\t\t<th><input id=\"pointsPerQuestion\" value={this.state.inputPointsPerQuestion} onChange={this.handlePointsPerQuestionChange} />\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tclassName={ (this.newRoundIsValid() ? 'is-success' : 'is danger') + ' button' }\n\t\t\t\t\t\t\t\t\t\tdisabled={ (!this.newRoundIsValid()) }\n\t\t\t\t\t\t\t\t\t\tonClick={ this.onClickStartRound }>\n\t\t\t\t\t\t\tStart!\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nSessionAdmin.propTypes = {\n\tsession: PropTypes.object.isRequired,\n\tteams: PropTypes.array.isRequired,\n\thandleSelectSession: PropTypes.func.isRequired,\n\thandleFlipTeam: PropTypes.func.isRequired,\n\thandleFlipSessionLive: PropTypes.func.isRequired,\n\thandleSubmitNewRound: PropTypes.func.isRequired,\n\thandleDeleteRoundInstance: PropTypes.func.isRequired,\n\thandleDeletePlayer: PropTypes.func.isRequired,\n\tplatonicRounds: PropTypes.array.isRequired\n};\n\nexport default SessionAdmin;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport SessionTable from './admin_session_table';\nimport SessionAdmin from './admin_session';\n\nclass SessionList extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t}\n\n\n\trender() {\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{ (!this.props.selectedSessionId) &&\n\t\t\t\t\t<SessionTable sessions={this.props.sessions} handleDeleteSession={this.props.handleDeleteSession} handleFlipSessionLive={this.props.handleFlipSessionLive} handleSelectSession={this.props.handleSelectSession} />\n\t\t\t\t}\n\t\t\t\t{ (this.props.selectedSessionId) &&\n\t\t\t\t\t<SessionAdmin\n\t\t\t\t\t\tsession={this.props.sessions.filter(n => n.id == this.props.selectedSessionId)[0]}\n\t\t\t\t\t\tplatonicRounds = {this.props.platonicRounds}\n\t\t\t\t\t\tteams={this.props.teams}\n\t\t\t\t\t\thandleFlipTeam={this.props.handleFlipTeam}\n\t\t\t\t\t\thandleSelectSession={this.props.handleSelectSession}\n\t\t\t\t\t\thandleFlipSessionLive={this.props.handleFlipSessionLive}\n\t\t\t\t\t\thandleSubmitNewRound={this.props.handleSubmitNewRound}\n\t\t\t\t\t\thandleDeleteRoundInstance={this.props.handleDeleteRoundInstance}\n\t\t\t\t\t\thandleDeletePlayer={this.props.handleDeletePlayer}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default SessionList;\n\nSessionList.propTypes = {\n\tsessions: PropTypes.array.isRequired,\n\tteams: PropTypes.array.isRequired,\n\tselectedSessionId: PropTypes.number,\n\thandleSelectSession: PropTypes.func.isRequired,\n\thandleFlipSessionLive: PropTypes.func.isRequired,\n\thandleFlipTeam: PropTypes.func.isRequired,\n\thandleSubmitNewRound: PropTypes.func.isRequired,\n\thandleDeleteRoundInstance: PropTypes.func.isRequired,\n\thandleDeletePlayer: PropTypes.func.isRequired,\n\thandleDeleteSession: PropTypes.func.isRequired,\n\tplatonicRounds: PropTypes.array.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PlatonicRoundsTable = (props) => (\n\t<table className='table'>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>ID</th>\n\t\t\t\t<th>Name</th>\n\t\t\t\t<th>Question Count</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t{props.platonicRounds.map((pr, i) => (\n\t\t\t\t<tr key={i} className={pr.parseAsMaths ? 'has-text-info' : ''}>\n\t\t\t\t\t<td>{pr.id}</td>\n\t\t\t\t\t<td>{pr.name}</td>\n\t\t\t\t\t<td>{pr.questionCount ? pr.questionCount : '?'}</td>\n\t\t\t\t</tr>\n\t\t\t))}\n\t\t</tbody>\n\t</table>\n);\n\nPlatonicRoundsTable.propTypes = {\n\tplatonicRounds: PropTypes.array.isRequired,\n};\n\nexport default PlatonicRoundsTable;\n","import React, { Component } from 'react';\nimport Header from '../shared/header';\nimport Footer from '../shared/footer';\nimport SessionList from './admin_session_list';\nimport socketIOClient from 'socket.io-client';\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport SuccessIcon from '../shared/success_icon';\nimport PlatonicRoundsTable from './platonic_rounds_table';\nimport config from '../../config';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\n\nclass Admin extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet socketAddress =\n\t\t\tconfig.socket.protocol +\n\t\t\t'://' +\n\t\t\tconfig.socket.address +\n\t\t\t':' +\n\t\t\tconfig.socket.port;\n\t\tconst socket = socketIOClient(socketAddress);\n\n\t\twindow.addEventListener(\n\t\t\t'focus',\n\t\t\t(() => {\n\t\t\t\tthis.fetchQuiz();\n\t\t\t}).bind(this)\n\t\t);\n\n\t\tsocket.on(\n\t\t\t'connect',\n\t\t\t(() => {\n\t\t\t\t// inform the server this socket wants to know about admin events\n\t\t\t\tsocket.emit('admin connection');\n\t\t\t}).bind(this)\n\t\t);\n\n\t\t// TODO: replace these update functions with a 'less heavy' approach\n\t\t// for now i'm just stomping ALL the data on every update, but these could send\n\t\t// individual events with the actual data to be changed\n\t\t// and just update more gently\n\t\t// (like the client connection changed, which COULD just update the client connection instead of stomping)\n\t\t// for now i'm using one giant event because only I will be on this, and I've throttled fetchQuiz to only\n\t\t// work every few seconds anyway...\n\t\tsocket.on('client connection changed', () => this.fetchQuiz());\n\t\tsocket.on('update admin data', () => this.fetchQuiz());\n\n\t\tthis.state = {\n\t\t\tsocket: socket,\n\t\t\tselectedSessionId: null,\n\t\t\tsessions: [],\n\t\t\tplatonicRounds: [],\n\t\t\tteams: [],\n\t\t\tisFetching: false,\n\t\t\tnewSessionName: '',\n\t\t};\n\n\t\tthis.handleSelectSession = this.handleSelectSession.bind(this);\n\t\tthis.fetchQuiz = this.fetchQuiz.bind(this);\n\t\tthis.handleFlipSessionLive = this.handleFlipSessionLive.bind(this);\n\t\tthis.handleSubmitNewRound = this.handleSubmitNewRound.bind(this);\n\t\tthis.handleFlipTeam = this.handleFlipTeam.bind(this);\n\t\tthis.handleDeletePlayer = this.handleDeletePlayer.bind(this);\n\t\tthis.handleDeleteSession = this.handleDeleteSession.bind(this);\n\t\tthis.handleReseedDatabase = this.handleReseedDatabase.bind(this);\n\t\tthis.handleWipeAllData = this.handleWipeAllData.bind(this);\n\n\t\tthis.onClickWipeAllData = this.onClickWipeAllData.bind(this);\n\t\tthis.onClickReseedDatabase = this.onClickReseedDatabase.bind(this);\n\n\t\tthis.handleDeleteRoundInstance = this.handleDeleteRoundInstance.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onChangeSessionName = this.onChangeSessionName.bind(this);\n\t\tthis.createNewSession = this.createNewSession.bind(this);\n\t\tthis.isNewSessionNameValid = this.isNewSessionNameValid.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.title = 'QAdmin';\n\n\t\tthis.loadInitialData();\n\t\tthis.fetchQuiz();\n\t}\n\n\tloadInitialData() {\n\t\tthis.loadPlatonicRounds();\n\t\tthis.loadTeams();\n\t}\n\n\tloadPlatonicRounds() {\n\t\tthis.state.socket.emit('fetch platonic round list', (list) => {\n\t\t\tthis.setState({ platonicRounds: list });\n\t\t});\n\t}\n\n\tloadTeams() {\n\t\tthis.state.socket.emit('fetch teams', (teams) => {\n\t\t\tthis.setState({ teams: teams });\n\t\t});\n\t}\n\n\tfetchQuiz() {\n\t\t// TODO: consider adding a throttle here to only update every 5s at most (needs to set a timeout to update in a moment)\n\n\t\tif (!this.state.isFetching) {\n\t\t\tthis.setState({ isFetching: true });\n\t\t\tthis.state.socket.emit('fetch quiz', (sessions) => {\n\t\t\t\tthis.setState({ sessions: sessions, isFetching: false });\n\t\t\t});\n\t\t}\n\t}\n\n\tonChangeSessionName(e) {\n\t\tthis.setState({ newSessionName: e.target.value });\n\t}\n\n\thandleFlipTeam(player) {\n\t\tthis.state.socket.emit('flip team', player, () => {\n\t\t\tthis.fetchQuiz();\n\t\t});\n\t}\n\n\thandleSelectSession(id) {\n\t\tthis.fetchQuiz();\n\t\tthis.setState({ selectedSessionId: id });\n\t}\n\n\thandleSubmitNewRound(newRound) {\n\t\tthis.state.socket.emit('submit new round instance', newRound, () => {\n\t\t\tthis.fetchQuiz();\n\t\t});\n\t}\n\n\thandleDeleteRoundInstance(id) {\n\t\tthis.state.socket.emit(\n\t\t\t'delete round instance',\n\t\t\tid,\n\t\t\tthis.state.selectedSessionId,\n\t\t\t() => {\n\t\t\t\tthis.fetchQuiz();\n\t\t\t}\n\t\t);\n\t}\n\n\tupdateRoundInstanceTimes() {\n\t\t// this just needs to call the db, and then the server function calls pushRoundInstanceToSession (see newround/deleteround)\n\t}\n\n\thandleFlipSessionLive(sessionId) {\n\t\tthis.state.socket.emit(\n\t\t\t'admin flip session live',\n\t\t\tsessionId,\n\t\t\t(() => {\n\t\t\t\t// this.loadSessions();\n\t\t\t\tthis.fetchQuiz();\n\t\t\t}).bind(this)\n\t\t);\n\t}\n\n\tonClickWipeAllData() {\n\t\tconfirmAlert({\n\t\t\ttitle: 'Are you sure?',\n\t\t\tmessage:\n\t\t\t\t'*** THIS WILL WIPE ALL OF THE EXISTING SESSIONS, ROUNDS, PLAYERS, AND SUBMITTED QUESTIONS/ANSWERS ***',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\tonClick: () => this.handleWipeAllData(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: null,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tonClickReseedDatabase() {\n\t\tconfirmAlert({\n\t\t\ttitle: 'Are you sure?',\n\t\t\tmessage:\n\t\t\t\t'*** THIS WILL DELETE **ALL DATA** AND RESEED ALL OF THE PLATONIC ROUNDS AND QUESTIONS ***',\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Yes!',\n\t\t\t\t\tonClick: () => this.handleReseedDatabase(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'No',\n\t\t\t\t\tonClick: null,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\thandleReseedDatabase() {\n\t\tthis.state.socket.emit('reseed database', (message) => {\n\t\t\tif (message == 'ok') {\n\t\t\t\talert('ok');\n\t\t\t} else if (message && message.name == 'error') {\n\t\t\t\talert('error');\n\t\t\t} else {\n\t\t\t\talert('unexpected response: ' + message);\n\t\t\t}\n\n\t\t\tthis.loadInitialData();\n\t\t\tthis.fetchQuiz();\n\t\t});\n\t}\n\n\thandleWipeAllData() {\n\t\tthis.state.socket.emit('wipe all data', () => {\n\t\t\tthis.loadInitialData();\n\t\t\tthis.fetchQuiz();\n\t\t});\n\t}\n\n\tisNewSessionNameValid() {\n\t\treturn (\n\t\t\tthis.state.newSessionName && this.state.newSessionName.length > 3\n\t\t);\n\t}\n\n\tcreateNewSession() {\n\t\tif (this.isNewSessionNameValid()) {\n\t\t\tthis.state.socket.emit(\n\t\t\t\t'create new session',\n\t\t\t\tthis.state.newSessionName,\n\t\t\t\t() => {\n\t\t\t\t\tthis.fetchQuiz();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\thandleDeletePlayer(playerId) {\n\t\tif (playerId && Number.isInteger(playerId)) {\n\t\t\tthis.state.socket.emit('delete player', playerId, () => {\n\t\t\t\tthis.fetchQuiz();\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDeleteSession(sessionId) {\n\t\tif (sessionId && Number.isInteger(sessionId)) {\n\t\t\tthis.state.socket.emit('delete session', sessionId, () => {\n\t\t\t\tthis.fetchQuiz();\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Header />\n\t\t\t\t<div className='columns'>\n\t\t\t\t\t<div className='column is-half is-offset-one-quarter'>\n\t\t\t\t\t\t<section className='section'>\n\t\t\t\t\t\t\t<h1 className='title'>Admin</h1>\n\t\t\t\t\t\t\t<div className='box'>\n\t\t\t\t\t\t\t\t<h2 className='subtitle is-size-4'>Sessions</h2>\n\t\t\t\t\t\t\t\t<SessionList\n\t\t\t\t\t\t\t\t\tsessions={this.state.sessions}\n\t\t\t\t\t\t\t\t\tplatonicRounds={this.state.platonicRounds}\n\t\t\t\t\t\t\t\t\tteams={this.state.teams}\n\t\t\t\t\t\t\t\t\tselectedSessionId={\n\t\t\t\t\t\t\t\t\t\tthis.state.selectedSessionId\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleFlipTeam={this.handleFlipTeam}\n\t\t\t\t\t\t\t\t\thandleSubmitNewRound={\n\t\t\t\t\t\t\t\t\t\tthis.handleSubmitNewRound\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleDeleteRoundInstance={\n\t\t\t\t\t\t\t\t\t\tthis.handleDeleteRoundInstance\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleDeletePlayer={this.handleDeletePlayer}\n\t\t\t\t\t\t\t\t\thandleDeleteSession={\n\t\t\t\t\t\t\t\t\t\tthis.handleDeleteSession\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleFlipSessionLive={\n\t\t\t\t\t\t\t\t\t\tthis.handleFlipSessionLive\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thandleSelectSession={\n\t\t\t\t\t\t\t\t\t\tthis.handleSelectSession\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t{!this.state.selectedSessionId && (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='label'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor='sessionName'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAdd New Session\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='field'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='control has-icons-left has-icons-right'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(this.isNewSessionNameValid()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'is-success'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'is-warning') +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t' input'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='sessionName'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='New session name'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.newSessionName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeSessionName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='icon is-small is-left'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfaUser\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SuccessIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.isNewSessionNameValid()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition='is-right'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='level'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='level-item'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='button is-info'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.createNewSession\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCreate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='box'>\n\t\t\t\t\t\t\t\t<h2 className='subtitle is-size-4'>\n\t\t\t\t\t\t\t\t\tAvailable Platonic Rounds\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<span className='has-text-info'>Maths</span>{' '}\n\t\t\t\t\t\t\t\t\t/ Not Maths)\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<PlatonicRoundsTable\n\t\t\t\t\t\t\t\t\tplatonicRounds={this.state.platonicRounds}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{!this.state.selectedSessionId && (\n\t\t\t\t\t\t\t\t<div className='box'>\n\t\t\t\t\t\t\t\t\t<div className='content'>\n\t\t\t\t\t\t\t\t\t\t<h2 className='subtitle is-size-4'>\n\t\t\t\t\t\t\t\t\t\t\tDangerous Nonsense\n\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='button is-danger'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onClickWipeAllData\n\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\tWipe All Data\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='button is-danger'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.onClickReseedDatabase\n\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\tReseed Database\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Footer />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Admin;\n","import React, { Component } from 'react';\nimport config from '../../config';\nimport socketIOClient from 'socket.io-client';\nimport Admin from './admin';\n\n/* TODO: VERY QUICK AND DIRTY PROTOTYPE: REPLACE WITH *ACTUAL AUTHENTICATION* */\nclass AdminGate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tlet socketAddress =\n\t\t\tconfig.socket.protocol +\n\t\t\t'://' +\n\t\t\tconfig.socket.address +\n\t\t\t':' +\n\t\t\tconfig.socket.port;\n\t\tconst temporarySocket = socketIOClient(socketAddress);\n\n\t\ttemporarySocket.on('connect', () => {\n\t\t\ttemporarySocket.emit('temporary admin connection');\n\t\t});\n\n\t\tthis.state = {\n\t\t\ttemporarySocket: temporarySocket,\n\t\t\tinputWord: '',\n\t\t\tpassed: config.isDev,\n\t\t};\n\n\t\tthis.onChangeInputWord = this.onChangeInputWord.bind(this);\n\t\tthis.onClickGoButton = this.onClickGoButton.bind(this);\n\t}\n\n\tonChangeInputWord(e) {\n\t\tthis.setState({ inputWord: e.target.value });\n\t}\n\n\tonClickGoButton() {\n\t\t/* TODO: this will obviously not remotely stop a determined intruder, but there's nothing of value inside\n\t\t\t\tso all I need is to deter anybody actually playing the live game. for now!\n\t\t*/\n\t\tthis.state.temporarySocket.emit(\n\t\t\t'authenticate admin',\n\t\t\tthis.state.inputWord,\n\t\t\t(result) => {\n\t\t\t\tthis.setState({ passed: result });\n\t\t\t}\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{!this.state.passed && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={this.state.inputWord}\n\t\t\t\t\t\t\tonChange={this.onChangeInputWord}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button onClick={this.onClickGoButton}>Go</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{this.state.passed && <Admin />}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default AdminGate;\n","import React, { Component } from 'react';\nimport '../../../node_modules/react-vis/dist/style.css';\nimport { FlexibleXYPlot, XAxis, YAxis, VerticalBarSeries, LabelSeries } from 'react-vis';\nimport windowDimensions from 'react-window-dimensions';\n\nclass SessionScores extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {  };\n\t}\n\n\troundUp(x){\n\t\tvar negative = false;\n\n\t\tif(x < 0) {\n\t\t\tnegative = true;\n\t\t\tx *= -1;\n\t\t}\n\t\tvar y = Math.pow(10, x.toString().length-1); x = (x/y);\n\t\tx = Math.ceil(x);\n\t\tx = x*y;\n\t\tif(negative) x *= -1;\n\t\treturn x;\n\t}\n\n\trender() {\n\n\t\tlet width = Math.max(this.props.width- 500, 300);\n\t\tlet height = Math.max(this.props.height - 300, 300);\n\n\t\tlet data = [];\n\t\tlet maxScore = 0;\n\t\tlet minScore = 0;\n\n\t\tif(this.props.teamScores && this.props.teamScores.length > 0)\n\t\t{\n\t\t\tdata = this.props.teamScores.map((ts,i) =>\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tx: 'Team ' + ts.name,\n\t\t\t\t\ty: ts.totalScore,\n\t\t\t\t\tcolor: ts.colour,\n\t\t\t\t\tlabel: ts.totalScore,\n\t\t\t\t\tyOffset: 0,\n\t\t\t\t\tstyle: { fontSize: '2.8rem', fontWeight: 'bold', fill:'white', stroke: 'black', strokeWidth: '2px'}};\n\t\t\t});\n\n\t\t\tmaxScore =  Math.max(...this.props.teamScores.map(o => o.totalScore), 0);\n\t\t\tminScore = this.props.teamScores.reduce((min, p) => p.totalScore < min ? p.totalScore : min, 0);\n\t\t}\n\n\t\tlet yMax = this.roundUp(maxScore);\n\n\t\tconsole.log(maxScore + '; ' + yMax);\n\n\t\tlet yDomain = [minScore, yMax];\n\n\t\treturn (\n\t\t\t<div style={{width: width + 100, margin:'auto'}}>\n\t\t\t\t<a onClick={() => this.props.selectSession(null)}>Back</a>\n\t\t\t\t<FlexibleXYPlot animation height={height} width={width} xType=\"ordinal\" yDomain={yDomain} style={{overflow:'visible'}}>\n\t\t\t\t\t<VerticalBarSeries animation data={data} colorType='literal' />\n\t\t\t\t\t<LabelSeries\n\t\t\t\t\t\tanimation\n\t\t\t\t\t\tallowOffsetToBeReversed\n\t\t\t\t\t\tdata={data} style={{color:'white !important'}} />\n\t\t\t\t\t<XAxis animation style={{ fontSize: '2rem', fontWeight: 'bold'}}/>\n\t\t\t\t\t<YAxis animation style={{ fontSize: '1.5rem', fontWeight: 'bold'}} />\n\t\t\t\t</FlexibleXYPlot>\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default windowDimensions()(SessionScores);","import React, { Component } from 'react';\nimport socketIOClient from 'socket.io-client';\nimport Header from '../shared/header';\nimport config from '../../config';\nimport SessionScores from './session_scores';\n\nclass Scores extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet socketAddress =\n\t\t\tconfig.socket.protocol +\n\t\t\t'://' +\n\t\t\tconfig.socket.address +\n\t\t\t':' +\n\t\t\tconfig.socket.port;\n\n\t\tconst socket = socketIOClient(socketAddress);\n\n\t\tsocket.on('connect', () => {\n\t\t\t// happens on first connection, and on subsequent reconnections\n\t\t\t// so each time we want to register for events\n\n\t\t\t// (this will join or rejoin the server-side session room, if we have one)\n\t\t\tsocket.emit('scores connection');\n\t\t});\n\n\t\tsocket.on('update scores data', () => {\n\t\t\tthis.updateSession();\n\t\t});\n\t\tsocket.on('update sessions list', () => {\n\t\t\tthis.fetchLiveSessions();\n\t\t});\n\n\t\tthis.state = {\n\t\t\tsocket: socket,\n\t\t\tliveSessions: [],\n\t\t\tselectedSessionId: null,\n\t\t\tteamScores: [],\n\t\t};\n\n\t\tthis.receiveLiveSessions = this.receiveLiveSessions.bind(this);\n\t\tthis.tick = this.tick.bind(this);\n\t\tthis.updateSession = this.updateSession.bind(this);\n\t\tthis.selectSession = this.selectSession.bind(this);\n\t\tthis.fetchLiveSessions = this.fetchLiveSessions.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.timerID = setInterval(() => this.tick(), 900);\n\t\tthis.fetchLiveSessions();\n\t\tdocument.title = 'Q Scores';\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.timerID);\n\t}\n\n\tfetchLiveSessions() {\n\t\tthis.state.socket.emit('fetch live sessions', this.receiveLiveSessions);\n\t}\n\n\treceiveLiveSessions(sessions) {\n\t\tthis.setState({ liveSessions: sessions });\n\t}\n\n\tselectSession(id) {\n\t\tthis.setState({ selectedSessionId: id, teamScores: [] });\n\t\tthis.updateSession();\n\t}\n\n\ttick() {\n\t\tthis.updateSession();\n\t}\n\n\tupdateSession() {\n\t\tif (this.state.selectedSessionId) {\n\t\t\tthis.state.socket.emit(\n\t\t\t\t'fetch team scores',\n\t\t\t\tthis.state.selectedSessionId,\n\t\t\t\t(teamScores) => {\n\t\t\t\t\tthis.setState({ teamScores: teamScores });\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\tlet liveSessions = this.state.liveSessions;\n\t\tlet sessionSelected = !!this.state.selectedSessionId;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Header />\n\t\t\t\t<section className='section'>\n\t\t\t\t\t{!sessionSelected && (\n\t\t\t\t\t\t<div className='box'>\n\t\t\t\t\t\t\t{liveSessions && liveSessions.length > 0 && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h1 className='title'>Pick Session</h1>\n\t\t\t\t\t\t\t\t\t<table className='table'>\n\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t{liveSessions.map((s, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='subtitle'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectSession(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{s.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{(!liveSessions || liveSessions.length == 0) && (\n\t\t\t\t\t\t\t\t<h1 className='title'>No Live Sessions</h1>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{sessionSelected && (\n\t\t\t\t\t\t<SessionScores\n\t\t\t\t\t\t\tsessionId={this.state.selectedSessionId}\n\t\t\t\t\t\t\tselectSession={this.selectSession}\n\t\t\t\t\t\t\tteamScores={this.state.teamScores}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Scores;\n","import React from 'react';\nimport ErrorBoundary from './error_boundary';\n\nimport { Switch, BrowserRouter, Route } from 'react-router-dom';\nimport Quiz from './components/quiz/quiz';\nimport AdminGate from './components/admin/admin_gate';\nimport Scores from './components/scores/scores';\n\nconst App = () => (\n\t<ErrorBoundary>\n\t\t<BrowserRouter>\n\t\t\t<Switch>\n\t\t\t\t<Route exact path='/' component={Quiz} />\n\t\t\t\t<Route exact path='/admin' component={AdminGate} />\n\t\t\t\t<Route exact path='/scores' component={Scores} />\n\t\t\t\t<Route component={NotFound} />\n\t\t\t</Switch>\n\t\t</BrowserRouter>\n\t</ErrorBoundary>\n);\n\nexport default App;\n\nconst NotFound = () => <h1>404.. Page not found!</h1>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import App from './App';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport * as serviceWorker from './serviceWorker';\n\nrequire('./resources/styles/styles.js');\n\nrender(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAWCAYAAACFbNPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABRdJREFUeNrsW6+X2zgQdu8FhMXQbAPDmmNhG1jWwGX1sWXNf7A5dqxZVtbAY7dlYedlgSoLdJmhw8xy1nuf3ptTNZLl2N5Nq3lvXhNZHo2k+eZXtm/O53MU6OpoDp5q4xk4UFckARL4ajitOT/bqax5U3NseH/DvNNkjomkLrual4y+meGdzLI/0/wNnnH73ljkbSx6Nzrz34KLuAqSkULU/KXmG8fcSc0PmD/vWS+py4ea/635qea4x7VSZvzBEElVlH3wlPUDBYBcDzjetjDeIdOt9wBJXyT38sg82xnGtszcR59zCQB5/fSEqNCG1gPreuvjnVvQpuYTs+5K2/etYd53yGhMI09PplMJ1mlWc4LPOZjKqWouDPILPFMUg+X42BLClaykgY5TRobSKcFauvzK82wqonfC7FmtxclPLZHjEeDJSNGeEsP4g/GsbenZkMJMGFDuegJIiT3+w0SMDDaysaRWZV8A4TyDIKFVXvidwZALzCmAdGkUf2mGIuXvaz6Q8Ts82+JClo4Qm1q8sHDMySHnHWPwB1xA5Xk2e+xZnslnAhL5/R7ythaPqdMJ5yC0dQT0X8MIujZS/exjnIcO4LdRvyTv8itSOj2l3ODuJpemVm0Aogx9T76/g+FK4zrCUMZQRBBPs4SRfMa8BaLMkcxR/x7IBSRYs3TkmwWJHoKsPca6K+hYMvuIDIa/I3oswJHhPdfZKAeSYkzJXZELr5gi84bxlMJyR9uB0qkSa31hwNRn/ZPiPnUgfGTmf/NNrdoCpNLSpb/hsWJc6NgQBTKML4jB6ACZkUgS4/CnxOB1T++6uFzz/Esi17QPLqJQD30PvQ9MmNZlZoiAKrVSXaUFScuO5AxcHtvkINIGOb/osRaJLXdgq1POHYBTGvwnD0CVQwDEdkCcQUcEFDE+FwZQCJJLZ+S5aGA4Nm+VMHovDYCwgeYArz9l9phoxprA+AsSeWZk3crR9YkbAHfKFKNDddfWFlD2TVvch2v/f16iz6gFIKhhLcilTZlUJTIUpwLpxoy8d8D3Ofl8NMhzAYT+wkyL/NwBkMwBkNJhuGND7RJjvCKAuCPRt/I8/9MLdtOaev2vA+qUwpYmXadWXQFEXTrN7xMDIGba9yMByAzvFhinxfixYeHKRY4xKZRNBbkPzRwpHpWZkAbDkqx/JB2rY4v7mkSvn7YDrpU7Uq300gVGLRTaWcLqHIZPvePYYPAlAQONAAeSp7c1IgF5CeqGpIOLUJGtSe0SEcDHhohTeZy1iVYkNcsYo7h5IXA06RSdLCnPvIUT2DIAeewi1Rt1jGYFknutQzWG8RdaFJlpwFEdq5hJrzivsGfSuicYVApgV0y9YOpCpVqaptIiW8RKteh1ST7OvbfWAJIZUtChAXKCJ9823BfXgMg6rKnKLoSMPAFQOOY8QTHarSkADmFIs/LoxzZuRrpdtu4U10UqDUY2J7WNKwIUzLqZ5dBzRsbBEAULD4B8Nxj7LcCeMilwX38P9czoKMi9/3TkA5CmOXsWNeuBV4xMYemEiRY66u+59rFvcY4+9YyPfOmVTb8zfIAXpoY5RbTsq05ZRr8gjaJAr5lUpDClHTKyfAxH1C+FP1Z8/SSjwrcL3l+HIwwA+ZmpRHrj+/uCrF9+j4b50S6kWIFeHCQrACV11BrPSM12TDPh2bFWkzlNSTQcsz3LWzYQ8i428Cb8n/SrpWn0/1/uyxAtuqcAkECBLPSfAAMAD0//f+CYk/8AAAAASUVORK5CYII=\""],"sourceRoot":""}