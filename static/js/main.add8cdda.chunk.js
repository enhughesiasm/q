(this.webpackJsonpq=this.webpackJsonpq||[]).push([[0],{113:function(e,s){},172:function(e,s,t){t(173),t(174),t(175),t(176),t(177),t(178)},175:function(e,s,t){},176:function(e,s,t){},177:function(e,s,t){},178:function(e,s,t){},179:function(e,s,t){"use strict";t.r(s);var n=t(1),i=t(2),a=t.n(i),c=t(4),o=t(5),r=t(7),l=t(6),d=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={hasCaughtError:!1},n}return Object(o.a)(t,[{key:"componentDidCatch",value:function(e){console.error(e),this.setState({hasCaughtError:!0})}},{key:"render",value:function(){return this.state.hasCaughtError?Object(n.jsx)("div",{children:"Sorry! Something went wrong. Please try reloading the site."}):this.props.children}}]),t}(a.a.Component),h=t(182),u=t(183),j=t(184),b=function(){return Object(n.jsxs)("nav",{className:"navbar is-info is-fixed-top",role:"navigation","aria-label":"main navigation",children:[Object(n.jsx)("div",{className:"navbar-brand",children:Object(n.jsx)("h1",{className:"is-size-1 has-text-weight-bold has-text-centered px-4",children:"q"})}),Object(n.jsxs)("div",{className:"navbar-menu",children:[Object(n.jsx)("div",{className:"navbar-start"}),Object(n.jsx)("div",{className:"navbar-end",children:Object(n.jsx)("a",{className:"navbar-item",href:"http://www.enhughesiasm.com",children:"return to enhughesiasm"})})]})]})},m=function(){return Object(n.jsx)("header",{children:Object(n.jsx)(b,{})})},p=function(){var e=(new Date).getFullYear();return Object(n.jsx)("footer",{className:"footer is-primary is-fixed-bottom",style:{padding:"1rem 1.5rem 1rem"},children:Object(n.jsxs)("div",{className:"content has-text-centered",children:["\xa9 Neil Hughes 2019",2019!==e?"\u2014"+e:""]})})},x=t(30),O=t(40),v=t(3),f=t(18),y=t.n(f),S=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={apiKey:"9LYRB89KKFIH8WgVUetwuoQCB0LihwnT",endPoint:"https://api.giphy.com/v1/gifs/random",rating:"g",imgUrl:"",visible:!1},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{})}}]),t}(i.Component),g=function(e){return Object(n.jsxs)("div",{className:"notification tile is-parent is-vertical is-light mx-4 has-text-centered is-flex has-text-white",style:{alignItems:"center",background:e.team.colour},children:[Object(n.jsx)("div",{className:"tile is-child",children:Object(n.jsxs)("p",{className:"title is-size-5-mobile",children:["Welcome, ",e.playerName]})}),Object(n.jsx)("div",{className:"tile is-child",children:Object(n.jsxs)("p",{className:"has-text-black tag is-size-5 is-size-6-mobile",children:["Valued member of"," ",Object(n.jsxs)("span",{style:{color:e.team.colour},children:["\xa0Team ",e.team.name]})]})})]})},N=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{team:e.team,playerName:e.playerName}),Object(n.jsx)("div",{className:"notification is-light",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsxs)("h2",{className:"subtitle has-text-primary is-size-6-mobile",children:["The session"," ",Object(n.jsx)("span",{className:"has-text-success has-text-weight-bold",children:e.sessionName})," ","isn't yet live, but it should be soon."]}),Object(n.jsx)("h2",{className:"subtitle is-size-4 is-size-6-mobile",children:"Hang on till then."}),Object(n.jsx)(S,{tag:"bored"})]})})]})},k=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={initialSecondsRemaining:30},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({initialSecondsRemaining:this.props.secondsRemaining})}},{key:"render",value:function(){return Object(n.jsx)("section",{className:"hero is-light is-medium",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsxs)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:["Round ",this.props.roundNumber]}),Object(n.jsxs)("h1",{className:"title is-size-5-mobile is-spaced",children:['"',this.props.roundName,'"']}),Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:"will start in"}),Object(n.jsx)("h1",{className:(this.props.secondsRemaining<=this.state.initialSecondsRemaining?"has-text-primary":"")+" title is-size-5-mobile is-spaced",children:this.props.secondsRemaining}),Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:"seconds!"}),this.props.secondsRemaining<=this.state.initialSecondsRemaining&&Object(n.jsx)("progress",{className:"progress is-primary",value:this.state.initialSecondsRemaining-this.props.secondsRemaining,max:this.state.initialSecondsRemaining}),Object(n.jsx)(S,{tag:"excitement"})]})})})}}]),t}(i.Component),w=t(20),R=t.n(w),I=function(e){var s=0,t=e.playerStatus.scoresByRoundInstanceId.filter((function(s){return s[0]==e.roundInstanceId}));return t&&t.length>0&&t[0][1]&&(s=parseInt(t[0][1])),Object(n.jsx)("section",{className:"hero is-light is-medium",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:"Hooray!"}),Object(n.jsx)("h1",{className:"title is-size-5-mobile has-text-success is-spaced",children:"You've answered every single question."}),Object(n.jsxs)("h3",{className:"subtitle is-size-6-mobile is-spaced",children:["This round you scored ",Object(n.jsx)("span",{className:"is-size-4 is-size-6-mobile "+s>0?"has-text-success":"has-text-danger",children:s}),s==e.playerStatus.totalScore?".":Object(n.jsxs)("span",{children:[" and your total score is ",Object(n.jsx)("span",{className:"is-size-4 is-size-6-mobile "+e.playerStatus.totalScore>0?"has-text-success":"has-text-danger",children:e.playerStatus.totalScore})," "]})]}),Object(n.jsx)("h3",{className:"subtitle is-size-6-mobile is-spaced",children:"Chill out until the end of the round."}),Object(n.jsxs)("h3",{className:"subtitle is-size-6-mobile",children:["(there's ",Object(n.jsx)(R.a,{fromNow:!0,ago:!0,children:e.endTime})," to go)."]}),Object(n.jsx)(S,{tag:"relax"})]})})})},C=function(e){return Object(n.jsxs)("section",{className:"notification is-dark is-marginless",style:{background:e.team.colour},children:[Object(n.jsxs)("h3",{className:"subtitle has-text-weight-bold is-size-5 is-size-6-mobile",style:{marginBottom:"0.5rem"},children:["Round ",e.round.roundNumber,': "',e.round.name,'"']}),Object(n.jsxs)("h2",{className:"subtitle is-size-5 is-size-6-mobile",children:["Time Remaining: ",Object(n.jsx)(R.a,{fromNow:!0,ago:!0,children:e.round.endTime})]})]})},A=(t(117),t(78)),F=function(e){var s=e.inputString,t=e.extraClasses;return Object(n.jsx)("span",{className:t,children:Object(n.jsx)(A.a,{children:s})})},z=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"notification is-light is-marginless has-text-centered",children:Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile",children:e.question.prompt})}),Object(n.jsxs)("section",{className:"notification is-dark is-bold has-text-centered",children:[e.question.parseAsMaths&&Object(n.jsx)(F,{inputString:e.question.question,extraClasses:"is-size-2 is-size-5-mobile"}),!e.question.parseAsMaths&&Object(n.jsx)("span",{className:"is-size-2 is-size-5-mobile",children:e.question.question})]})]})},T=t(12),L=t(11),D=function(e){var s=e.question,t=null!=s.submittedIndex&&Number.isInteger(s.submittedIndex)&&null!=s.correctIndex&&Number.isInteger(s.correctIndex)&&s.submittedIndex===s.correctIndex;return Object(n.jsxs)("div",{children:[Object(n.jsx)(z,{question:e.question}),e.question.answers.map((function(t,i){return Object(n.jsx)("div",{className:"quizanswer",children:Object(n.jsxs)("button",{className:"button is-size-4 is-size-6-mobile is-medium is-fullwidth "+(s.correctIndex===i?" is-success ":e.clickedIndex===i?" is-danger ":" is-dark "),disabled:!0,style:{whiteSpace:"normal",height:"100%"},value:i,children:[e.clickedIndex===i&&Object(n.jsx)("span",{className:"tag is-black is-pulled-left answer-tag-left",children:Object(n.jsx)(T.a,{icon:L.e})}),e.question.parseAsMaths&&Object(n.jsx)(F,{inputString:t}),!e.question.parseAsMaths&&Object(n.jsx)("span",{children:t}),e.clickedIndex===i&&Object(n.jsx)("span",{className:"tag is-black is-pulled-right answer-tag-right",children:Object(n.jsx)(T.a,{icon:L.d})})]})},i)})),Object(n.jsxs)("div",{className:"notification is-marginless has-text-centered "+(t?"is-success":"is-danger"),children:[Object(n.jsx)("h1",{className:"title is-spaced is-size-3 is-size-5-mobile ",style:{marginTop:"0.5rem"},children:t?"CORRECT":"INCORRECT"}),Object(n.jsxs)("h2",{className:"subtitle is-spaced is-size-5 is-size-6-mobile ",children:["You ",t?"gained":"lost"," ",Object(n.jsx)("span",{className:"has-text-weight-bold is-size-4 is-size-5-mobile ",children:Math.abs(s.pointsEarned)})," ","points."," "]}),Object(n.jsx)("button",{className:"button is-medium is-size-6-mobile is-fullwidth is-warning",onClick:e.onClickNextQuestion,children:"NEXT QUESTION"}),Object(n.jsx)(S,{tag:t?"celebration":"sad"})]})]})},P=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(z,{question:e.question}),e.question.answers.map((function(s,t){return Object(n.jsx)("div",{className:"quizanswer",children:Object(n.jsxs)("button",{className:"button is-size-4 is-size-6-mobile is-medium is-fullwidth is-info ",disabled:e.answerClicked,value:t,style:{whiteSpace:"normal",height:"100%"},onClick:function(){return e.onClickAnswer(t)},children:[e.question.parseAsMaths&&Object(n.jsx)(F,{inputString:s}),!e.question.parseAsMaths&&Object(n.jsx)("span",{children:s})]})},t)}))]})},Q=t(8),q=t.n(Q),E=t(21),V=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={showUntil:null},n}return Object(o.a)(t,[{key:"render",value:function(){var e=q()(),s=0;this.state.beginTime&&this.state.duration&&(s=1-e.diff(this.state.beginTime)/this.state.duration);return Object(n.jsx)("span",{children:Object(n.jsx)("span",{className:"content is-overlay has-text-centered is-size-4 has-text-weight-bold "+(this.props.success?"has-background-success":"has-background-danger"),style:{transition:"opacity .7s ease-in-out",opacity:s,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(n.jsx)("span",{className:"",children:Object(n.jsx)("span",{className:"is-size-2",children:this.props.content})})})})}}],[{key:"getDerivedStateFromProps",value:function(e,s){if(e.showUntil!=s.showUntil){var t=q()();return{beginTime:t,duration:e.showUntil.diff(t),showUntil:e.showUntil}}return null}}]),t}(i.Component),W=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={previousTotalScore:e.playerStatus.totalScore,changeInTotalScore:null,showAnimationUntil:null},n}return Object(o.a)(t,[{key:"render",value:function(){var e,s=this,t=0,i=this.props.playerStatus.scoresByRoundInstanceId.find((function(e){var t;return(null===(t=e[0])||void 0===t?void 0:t.toString())===s.props.roundInstanceId.toString()}));i&&i.length>0&&(t=null!==(e=i[1])&&void 0!==e?e:0);var a=0!==this.state.changeInTotalScore,c=this.state.changeInTotalScore>0;return Object(n.jsxs)("div",{className:"notification is-info is-clearfix",children:[Object(n.jsxs)("h1",{className:"title is-size-5 is-size-6-mobile py-2",style:{marginBottom:0},children:["Your Score This Round:"," ",Object(n.jsx)("span",{className:"has-text-weight-bold  has-text-warning",children:t})]}),Object(n.jsxs)("h1",{className:"title is-size-5 is-size-6-mobile py-2",style:{marginBottom:0},children:["Your Total Score:"," ",Object(n.jsx)("span",{className:"has-text-weight-bold has-text-warning",children:this.props.playerStatus.totalScore?this.props.playerStatus.totalScore:0})]}),a&&Object(n.jsx)(V,{content:c?"+"+this.state.changeInTotalScore:this.state.changeInTotalScore,success:c,showUntil:this.state.showAnimationUntil})]})}}],[{key:"getDerivedStateFromProps",value:function(e,s){if(e.playerStatus.totalScore!=s.previousTotalScore){var t=e.playerStatus.totalScore-(s.previousTotalScore?s.previousTotalScore:0);return{previousTotalScore:e.playerStatus.totalScore,changeInTotalScore:t,showAnimationUntil:q()().add(1,"s")}}return null}}]),t}(i.Component),U=function(e){var s=q()(e.endTime).diff(q()()),t=!1;return s<3e4&&(t=!0),Object(n.jsx)("div",{children:t&&Object(n.jsx)("div",{className:"notification is-warning",style:{marginTop:"0.8rem"},children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile",children:"Not long left!"}),Object(n.jsx)("div",{children:Object(n.jsx)("progress",{className:"progress is-primary",value:s,max:3e4})})]})})})},M=(t(9),t(80)),B=function(e){return Object(n.jsx)("div",{style:{height:"50px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)(M.BounceLoader,{color:e.color?e.color:"#dddddd"})})},Y=function(){return Object(n.jsx)("div",{className:"notification is-light",children:Object(n.jsxs)("div",{className:"content has-text-centered py-6",children:[Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile",children:"thinking of question..."}),Object(n.jsx)(B,{})]})})},H=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).onClickAnswer=n.onClickAnswer.bind(Object(v.a)(n)),n.pullQuestion=n.pullQuestion.bind(Object(v.a)(n)),n.state={answerClicked:!1,clickedIndex:-1},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.pullQuestion()}},{key:"pullQuestion",value:function(){this.setState({answerClicked:!1,clickedIndex:-1}),this.props.round.pullNextQuestion(this.props.round)}},{key:"onClickAnswer",value:function(e){this.setState({answerClicked:!0,clickedIndex:e}),this.props.round.submitAnswer(this.props.round,e)}},{key:"render",value:function(){var e=this.props.round.playerQuestion,s=!1,t=this.props.round.exhausted;return e&&(s=null!=e.answerReceived),Object(n.jsxs)("div",{className:"live-round",children:[Object(n.jsx)(C,{round:this.props.round,team:this.props.player.team}),Object(n.jsx)(W,{playerStatus:this.props.playerStatus,roundInstanceId:this.props.round.id}),t&&Object(n.jsx)(I,{roundInstanceId:this.props.round.id,endTime:this.props.round.endTime,playerStatus:this.props.playerStatus}),!t&&Object(n.jsxs)("div",{children:[!e&&Object(n.jsx)(Y,{}),e&&!s&&Object(n.jsx)(P,{question:e,clickedIndex:this.state.clickedIndex,onClickAnswer:this.onClickAnswer,answerClicked:this.state.answerClicked}),e&&s&&Object(n.jsx)(D,{question:e,clickedIndex:this.state.clickedIndex,onClickNextQuestion:this.pullQuestion})]}),Object(n.jsx)(U,{endTime:this.props.round.endTime})]})}}]),t}(i.Component),G=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(){return Object(c.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[!this.props.round.isLive&&Object(n.jsx)(k,{roundName:this.props.round.name,roundNumber:this.props.round.roundNumber,secondsRemaining:this.props.round.secondsRemaining}),this.props.round.isLive&&Object(n.jsx)(H,{round:this.props.round,player:this.props.player,session:this.props.session,playerStatus:this.props.playerStatus})]})}}]),t}(i.Component),J=function(e){var s=e.teamStatus&&e.teamStatus.filter((function(e){return null!=e.teamId})).length>0&&e.teams&&e.teams.length>0;return Object(n.jsx)("div",{className:"tile is-parent is-rounded",style:{padding:"1rem"},children:s&&e.teamStatus&&e.teamStatus.filter((function(e){return e.playerCount>0})).map((function(s,t){var i=e.teams.filter((function(e){return e.id===s.teamId}))[0];return Object(n.jsxs)("div",{className:"tile is-child has-text-white is-size-4 is-size-6-mobile is-rounded ",style:{background:i.colour,borderRadius:"4px"},children:[Object(n.jsxs)("span",{className:"has-text-weight-bold",children:["Team ",i.name]}),Object(n.jsx)("br",{}),s.playerNames&&Array.isArray(s.playerNames)&&Object(n.jsx)("div",{children:s.playerNames.map((function(e){return Object(n.jsx)("span",{className:"is-size-5 is-size-6-mobile mx-3 my-1 py-1",children:e},"team-".concat(t,"-").concat(e))}))}),Object(n.jsxs)("span",{className:"has-text-weight-bold is-size-3 is-size-5-mobile",children:[s.totalScore?s.totalScore:0," points"]})]},t)}))})},K=function(e){return Object(n.jsx)("div",{children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{}),Object(n.jsx)("tbody",{children:e.completedRounds.map((function(s,t){var i=0,a=s.id;return e.playerStatus.scoresByRoundInstanceId.forEach((function(e,s){e[0].toString()===a.toString()&&(i=e[1])})),Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{style:{minWidth:"50%"},children:["Round ",s.roundNumber]}),Object(n.jsx)("td",{children:s.name}),Object(n.jsx)("td",{className:i>0?"has-text-success":"has-text-danger",children:i||"-"})]},t)}))})]})})},X=function(e){var s=e.rounds.slice(0,e.finishedRounds);return Object(n.jsxs)("div",{children:[Object(n.jsx)(g,{team:e.player.team,playerName:e.player.name}),e.finishedRounds>0&&Object(n.jsx)("div",{className:"",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[e.playerStatus&&e.playerStatus.teamStatus&&Object(n.jsx)(J,{teamStatus:e.playerStatus.teamStatus,playerTeam:e.player.team,teams:e.teams}),Object(n.jsxs)("h2",{className:"subtitle is-size-6-mobile bo",children:["Your personal score is"," ",Object(n.jsx)("span",{className:(e.playerStatus.totalScore<0?"has-text-danger":"has-text-success")+" is-size-3 is-size-5-mobile has-text-weight-bold",children:e.playerStatus.totalScore?e.playerStatus.totalScore:0})," ","after"," ",Object(n.jsx)("span",{className:"has-text-info is-size-4 is-size-5-mobile has-text-weight-bold",children:e.finishedRounds})," ","round",e.finishedRounds>1?"s":""]}),Object(n.jsxs)("h3",{className:"subtitle is-size-6-mobile",children:[Object(n.jsx)("span",{className:(e.playerStatus.correctAnswers>0?"has-text-success":"has-text-warning")+" is-size-4 is-size-5-mobile has-text-weight-bold",children:e.playerStatus.correctAnswers})," ","out of"," ",Object(n.jsx)("span",{className:"has-text-info is-size-4 is-size-5-mobile has-text-weight-bold",children:e.playerStatus.questionsAnswered})," ","questions correct",Object(n.jsx)("span",{className:"has-text-info",children:0!==e.playerStatus.questionsAnswered?" ("+Math.round(e.playerStatus.correctAnswers/e.playerStatus.questionsAnswered*100)+"%)":""})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{className:"has-text-black",children:"Here's how you did in each round so far:"}),Object(n.jsx)(K,{playerStatus:e.playerStatus,completedRounds:s}),Object(n.jsx)("p",{className:"has-text-black has-text-weight-bold mt-6",children:"Good luck in the next round!"})]})}),0===e.finishedRounds&&Object(n.jsx)("div",{className:"notification is-light",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h2",{className:"subtitle has-text-success is-size-5-mobile",children:"You're in!"}),Object(n.jsx)("h2",{className:"subtitle is-size-5-mobile",children:"Stay tuned, the first round will be along shortly..."}),e.playerStatus&&e.playerStatus.teamStatus&&Object(n.jsx)(J,{teamStatus:e.playerStatus.teamStatus,playerTeam:e.player.team,teams:e.teams}),Object(n.jsx)("hr",{})]})})]})},$=function(){return Object(n.jsx)("section",{className:"hero is-light is-medium",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h1",{className:"title is-size-5-mobile is-spaced",children:"Round Finished!"}),Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:"Let's see how you did..."}),Object(n.jsx)(B,{}),Object(n.jsx)("br",{}),Object(n.jsx)(S,{tag:"clock"})]})})})},Z=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("section",{className:"hero is-light is-medium",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h1",{className:"title has-text-grey is-size-5-mobile",children:"loading..."}),Object(n.jsx)(B,{})]})})})})},_=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){return Object(c.a)(this,t),s.call(this,e)}return Object(o.a)(t,[{key:"render",value:function(){var e={},s={},t=this.props.rounds.allRoundInstances,i=this.props.rounds.nextRoundIndexes,a=t.length-i.length;i.length>0&&(e=t[i[0]]);var c=!1;return a>0&&(c=(s=t[a-1]).justFinished),Object(n.jsxs)("div",{children:[c&&Object(n.jsx)($,{round:s}),!c&&Object(n.jsxs)("div",{children:[!this.props.initialLoadComplete&&Object(n.jsx)(Z,{}),this.props.initialLoadComplete&&Object(n.jsxs)("div",{children:[0==i.length&&Object(n.jsx)(X,{player:this.props.player,playerStatus:this.props.playerStatus,sessionName:this.props.session.name,finishedRounds:a,isLoadingRounds:this.props.rounds.isLoading,rounds:this.props.rounds.allRoundInstances,teams:this.props.session.teams}),i.length>0&&Object(n.jsx)(G,{round:e,player:this.props.player,playerStatus:this.props.playerStatus,session:this.props.session})]})]})]})}}]),t}(i.Component),ee=function(){return Object(n.jsx)("section",{className:"hero is-light is-medium",children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h2",{className:"subtitle has-text-grey is-size-6-mobile  is-spaced",children:"new player detected"}),Object(n.jsx)("h1",{className:"title has-text-grey-dark is-size-5-mobile  is-spaced",children:"analysing your personality"}),Object(n.jsx)("progress",{className:"progress is-primary",value:10*Math.random(),max:10}),Object(n.jsx)(B,{color:"#dddddd"}),Object(n.jsx)(S,{tag:"thinking"})]})})})},se=function(e){return Object(n.jsx)("section",{className:"hero is-dark is-medium",style:{background:e.team.colour},children:Object(n.jsx)("div",{className:"hero-body",children:Object(n.jsxs)("div",{className:"content has-text-centered",children:[Object(n.jsx)("h2",{className:"subtitle is-size-6-mobile is-spaced",children:"Congratulations!"}),Object(n.jsxs)("h1",{className:"title is-size-5-mobile is-spaced",children:["You have been assigned to Team ",e.team.name]}),Object(n.jsx)("h2",{className:"subtitle is-size-5 is-size-6-mobile is-spaced",children:"joining now"}),Object(n.jsx)(B,{color:"#dddddd"}),Object(n.jsx)(S,{tag:"celebration",colour:"light"})]})})})},te=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(){return Object(c.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.showTeamAssignedScreenUntil,s=e&&q()().isBefore(e);return Object(n.jsxs)("section",{className:"section",children:[!this.props.player.team&&Object(n.jsx)(ee,{}),s&&Object(n.jsx)(se,{team:this.props.player.team}),!s&&this.props.player.team&&Object(n.jsxs)(n.Fragment,{children:[!!this.props.session.isLive&&Object(n.jsx)(_,{initialLoadComplete:this.props.initialLoadComplete,session:this.props.session,player:this.props.player,rounds:this.props.rounds,playerStatus:this.props.playerStatus}),!this.props.session.isLive&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(N,{team:this.props.player.team,playerName:this.props.player.name,sessionName:this.props.session.name})})]})]})}}]),t}(i.Component),ne=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(){return Object(c.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsx)("span",{className:this.props.position+" icon is-small",children:this.props.success?Object(n.jsx)(T.a,{icon:L.a,style:{color:"green"}}):Object(n.jsx)(T.a,{icon:L.g,style:{color:"red"}})})}}]),t}(i.Component),ie=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.onChangePlayerName=n.onChangePlayerName.bind(Object(v.a)(n)),n.onChangeSessionName=n.onChangeSessionName.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"onChangePlayerName",value:function(e){this.props.handleChange(e.target.value,this.props.sessionForm.sessionName)}},{key:"onChangeSessionName",value:function(e){this.props.handleChange(this.props.sessionForm.playerName,e.target.value)}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.handleSubmit()}},{key:"render",value:function(){return Object(n.jsx)("form",{className:"panel",style:{marginTop:"3rem"},children:Object(n.jsxs)("fieldset",{className:"panel-block px-0",children:[Object(n.jsx)("legend",{className:"px-6 py-2 has-background-warning-light has-text-dark",style:{width:"100%"},children:"Welcome."}),Object(n.jsxs)("div",{className:"px-4 pb-4",style:{width:"100%"},children:[Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",htmlFor:"playerName",children:"Name"}),Object(n.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(n.jsx)("input",{className:(this.props.sessionForm.isPlayerNameValid?"is-success":"is-warning")+" input",id:"playerName",placeholder:"Enter your name",value:this.props.sessionForm.playerName,onChange:this.onChangePlayerName}),Object(n.jsx)("span",{className:"icon is-small is-left",children:Object(n.jsx)(T.a,{icon:L.i})}),Object(n.jsx)(ne,{success:this.props.sessionForm.isPlayerNameValid,position:"is-right"})]})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{className:"label",htmlFor:"sessionName",children:"Entry Word"}),Object(n.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(n.jsx)("input",{id:"sessionName",className:(this.props.sessionForm.isSessionNameValid?"is-success":"is-warning")+" input",placeholder:"Enter the word for this session",value:this.props.sessionForm.sessionName,onChange:this.onChangeSessionName}),Object(n.jsx)("span",{className:"icon is-small is-left",children:Object(n.jsx)(T.a,{icon:L.f})}),Object(n.jsx)(ne,{success:this.props.sessionForm.isSessionNameValid,position:"is-right"})]})]}),Object(n.jsx)("div",{className:"field has-text-centered",children:Object(n.jsx)("button",{type:"submit",className:(this.props.sessionForm.isValid?"is-success":"is danger")+" button "+(this.props.sessionForm.isSubmitting?"is-loading":""),disabled:!this.props.sessionForm.isValid||this.props.sessionForm.isSubmitting,onClick:this.onSubmit,children:Object(n.jsx)("span",{style:{opacity:this.props.sessionForm.isSubmitting?0:1},children:"Enter!"})})})]})]})})}}]),t}(i.Component),ae={isDev:!1,socket:{protocol:"https",port:443,address:"quizzler-server.herokuapp.com"},quiz:{showRoundFinishedScreenForMilliseconds:5e3,showTeamAssignedScreenForSeconds:4,assignTeamForMilliseconds:3e3}},ce=function(){return Object(n.jsxs)("article",{className:"message is-info",style:{marginTop:"2rem"},children:[Object(n.jsx)("div",{className:"message-header",children:Object(n.jsx)("p",{children:"What is this?"})}),Object(n.jsxs)("div",{className:"message-body",children:["This part of the site is for"," ",Object(n.jsx)("strong",{children:"live interactive experiences"}),".",Object(n.jsxs)("p",{children:["If you're attending a live session, enter your"," ",Object(n.jsx)("strong",{children:"name"})," and the ",Object(n.jsx)("strong",{children:"entry word"})," above, and enjoy!"]})]})]})},oe=function(e){var s=e.connected;return Object(n.jsx)("div",{className:"has-text-right",style:{position:"fixed",bottom:"1rem",left:"1rem"},children:Object(n.jsx)(T.a,{icon:s?L.b:L.c,style:{color:s?"green":"red"}})})},re=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;Object(c.a)(this,t),n=s.call(this,e);var i={playerName:"",sessionName:"",previousSubmission:"",isSubmitting:!1,hasSubmitted:!1,isValid:!1,isSessionNameValid:!1,isPlayerNameValid:!1};ae.isDev&&(i={playerName:"Neil",sessionName:"Biscuit",previousSubmission:"",isValid:!0,isSessionNameValid:!0,isPlayerNameValid:!0});var a=ae.socket.protocol+"://"+ae.socket.address+":"+ae.socket.port,o=y()(a);o.on("connect",function(){o.emit("quiz connection",n.state.session,n.state.player)}.bind(Object(v.a)(n))),o.on("receive round instances",function(e){n.setServerRoundInstances(e),n.getPlayerStatus()}.bind(Object(v.a)(n))),o.on("receive question",function(e){n.receiveQuestion(e)}.bind(Object(v.a)(n))),o.on("session flipped",function(e){e&&n.state.session&&n.setState({session:e})}.bind(Object(v.a)(n))),o.on("session ended",function(){n.reinitialiseState()}.bind(Object(v.a)(n))),o.on("player deleted",function(){n.reinitialiseState()}.bind(Object(v.a)(n))),o.on("receive player status",function(e){n.receivePlayerStatus(e)}.bind(Object(v.a)(n))),o.on("receive team assignment",function(e,s){n.receiveTeamAssignment(e,s)}.bind(Object(v.a)(n))),o.on("receive new team",function(e){n.receiveTeamReassignment(e)}.bind(Object(v.a)(n))),o.on("no more questions",function(e){var s=n.state.exhaustedRoundInstanceIds;s.push(e),n.setState({exhaustedRoundInstanceIds:s})}.bind(Object(v.a)(n))),o.on("error loading question",function(e){console.log("error loading question!")}.bind(Object(v.a)(n))),o.on("disconnect",function(){n.forceUpdate()}.bind(Object(v.a)(n)));return n.state={initial:{serverLoad:!1,updateAfterServerLoad:!1,statusAfterPlayerLoad:!1},session:null,player:null,showTeamAssignedScreenUntil:null,sessionForm:i,socket:o,rounds:{isLoading:!1,serverRoundInstances:[],allRoundInstances:[],nextRoundIndexes:[]},nextPlayerQuestion:null,answerResponse:null,exhaustedRoundInstanceIds:[],playerStatus:{questionsAnswered:0,score:0,correctAnswers:0},statusUpdateCounter:0},n.handleSessionFormSubmit=n.handleSessionFormSubmit.bind(Object(v.a)(n)),n.handleSessionFormChange=n.handleSessionFormChange.bind(Object(v.a)(n)),n.isSessionFormValid=n.isSessionFormValid.bind(Object(v.a)(n)),n.isPlayerNameValid=n.isPlayerNameValid.bind(Object(v.a)(n)),n.isSessionNameValid=n.isSessionNameValid.bind(Object(v.a)(n)),n.loadRoundInstances=n.loadRoundInstances.bind(Object(v.a)(n)),n.updateRoundInstances=n.updateRoundInstances.bind(Object(v.a)(n)),n.setServerRoundInstances=n.setServerRoundInstances.bind(Object(v.a)(n)),n.getCurrentRoundScore=n.getCurrentRoundScore.bind(Object(v.a)(n)),n.reinitialiseState=n.reinitialiseState.bind(Object(v.a)(n)),n.pullNextQuestion=n.pullNextQuestion.bind(Object(v.a)(n)),n.receiveQuestion=n.receiveQuestion.bind(Object(v.a)(n)),n.submitAnswer=n.submitAnswer.bind(Object(v.a)(n)),n.receiveAnswerResponse=n.receiveAnswerResponse.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"reinitialiseState",value:function(){var e={isLoading:!1,serverRoundInstances:[],allRoundInstances:[],nextRoundIndexes:[]};this.setState((function(){return{rounds:e,initial:{serverLoad:!1,updateAfterServerLoad:!1,statusAfterPlayerLoad:!1},session:null,player:null,showTeamAssignedScreenUntil:null,nextPlayerQuestion:null,answerResponse:null,exhaustedRoundInstanceIds:[],playerStatus:{questionsAnswered:0,score:0,correctAnswers:0},statusUpdateCounter:0}}))}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),900),this.loadRoundInstances(),this.getPlayerStatus()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.updateRoundInstances(this.state.rounds.serverRoundInstances);var e=this.state.statusUpdateCounter;(e>20||!this.state.initial.statusAfterPlayerLoad&&this.state.player)&&(this.getPlayerStatus(),this.loadRoundInstances(),e=0),e++,this.setState({statusUpdateCounter:e})}},{key:"isRoundLive",value:function(e){var s=q()(),t=q()(e.startTime),n=q()(e.endTime);return t.isBefore(s)&&s.isBefore(n)}},{key:"getSecondsRemainingBeforeRoundStart",value:function(e){var s=q()();return q()(e.startTime).diff(s,"seconds")}},{key:"getPlayerStatus",value:function(){this.state.session&&this.state.player&&this.state.socket.emit("pull player status",this.state.session.id,this.state.player.id)}},{key:"receivePlayerStatus",value:function(e){var s=this.state.initial;s.statusAfterPlayerLoad=!0,this.setState({playerStatus:e,initial:s})}},{key:"loadRoundInstances",value:function(e){if(!e&&this.state.session&&this.state.session.id&&Number.isInteger(this.state.session.id)&&(e=this.state.session.id),e){var s=this.state.rounds;s.isLoading=!0,this.setState({rounds:s}),this.state.socket.emit("pull round instances",e)}}},{key:"setServerRoundInstances",value:function(e){e.sort((function(e,s){var t=q()(e.startTime),n=q()(s.startTime);return t.isBefore(n)?-1:t.isAfter(n)?1:0}));var s=this.state.rounds;s.serverRoundInstances=e;var t=this.state.initial;t.serverLoad=!0,this.setState((function(){return{rounds:s,initial:t}}))}},{key:"pullNextQuestion",value:function(e){if(e&&e.id){var s=this.state.rounds;s.allRoundInstances.forEach((function(e){e.playerQuestion=null})),this.setState((function(){return{rounds:s,nextPlayerQuestion:null,answerResponse:null}})),this.state.socket.emit("pull question",e.id,e.platonicRoundIds,this.state.player.id)}}},{key:"receiveQuestion",value:function(e){if(e&&e.roundInstanceId)this.setState({nextPlayerQuestion:e});else{console.log("Error loading question");var s=this.state.rounds.allRoundInstances.find((function(e){return e.isLive}));setTimeout((function(){s&&s.pullNextQuestion&&s.pullNextQuestion(s)}),1500)}}},{key:"submitAnswer",value:function(e,s){var t=this;e&&e.id&&Number.isInteger(s)?this.state.socket.emit("answer question",e.playerQuestion.id,s,this.state.player.id,(function(e){return t.receiveAnswerResponse(e)})):alert("yikes! unable to submit answer: "+s)}},{key:"getCurrentRoundScore",value:function(e){var s=0,t=this.state.playerStatus;if(t&&t.scoresByRoundInstanceId&&t.scoresByRoundInstanceId.length>0){var n=this.state.playerStatus.scoresByRoundInstanceId.filter((function(s){return s[0]==e}));n&&n.length>0&&n[0][1]&&(s=parseInt(n[0][1]))}return s}},{key:"receiveAnswerResponse",value:function(e){this.getPlayerStatus(),this.setState({answerResponse:e})}},{key:"formatRoundNames",value:function(e){if(!e)return"";var s="";return 1===e.length?s=e[0]:2===e.length?s=e.join(" & "):e.length>2&&(s=e.slice(0,-1).join(", ")+", & "+e.slice(-1)),s}},{key:"updateRoundInstances",value:function(e){var s=this;e=e||[];var t=Object(O.a)(e),n=[],i=q()();t.forEach(function(e,t){e.secondsRemaining=s.getSecondsRemainingBeforeRoundStart(e),e.isLive=s.isRoundLive(e),e.pullNextQuestion=s.pullNextQuestion,e.submitAnswer=s.submitAnswer,e.name=s.formatRoundNames(e.platonicRoundNames),e.exhausted=!1,s.state.exhaustedRoundInstanceIds.indexOf(e.id)>=0&&(e.exhausted=!0),e.justFinished=!1;var a=q()(e.endTime);e.millisecondsSinceRoundEnd=q()().diff(a),e.millisecondsSinceRoundEnd>0&&e.millisecondsSinceRoundEnd<ae.quiz.showRoundFinishedScreenForMilliseconds&&(e.justFinished=!0),i.isBefore(a)&&n.push(t),s.state.nextPlayerQuestion?e.id==s.state.nextPlayerQuestion.roundInstanceId&&(e.playerQuestion=s.state.nextPlayerQuestion,s.state.answerResponse&&s.state.answerResponse.roundInstanceId==e.id&&(e.playerQuestion.answerReceived=!0,e.playerQuestion.submittedIndex=s.state.answerResponse.submittedIndex,e.playerQuestion.correctIndex=s.state.answerResponse.correctIndex,e.playerQuestion.pointsEarned=s.state.answerResponse.pointsEarned)):e.playerQuestion=null}.bind(this));var a=this.state.rounds;a.allRoundInstances=t,a.nextRoundIndexes=n,a.isLoading=!1;var c=this.state.initial;c.serverLoad&&(c.updateAfterServerLoad=!0),this.setState((function(){return{rounds:a,initial:c}}))}},{key:"receiveTeamReassignment",value:function(e){if(e){var s=this.state.player;s.team=e,this.setState((function(){return{player:s}}))}}},{key:"receiveTeamAssignment",value:function(e,s){var t=this.state.player;t.team=s;var n=q()().add(ae.quiz.showTeamAssignedScreenForSeconds,"s");this.setState((function(){return{player:t,showTeamAssignedScreenUntil:n}}))}},{key:"handleSessionFormSubmit",value:function(){var e=this;this.setState({sessionForm:Object(x.a)(Object(x.a)({},this.state.sessionForm),{},{isSubmitting:!0})});var s=this.state.sessionForm.playerName,t=this.state.sessionForm.sessionName;if(this.isSessionFormValid(s,t)){var n=JSON.stringify({playerName:s,sessionName:t});this.state.socket.emit("join session",n,(function(s){s.session&&s.session.id&&(e.loadRoundInstances(s.session.id),s.player.team||setTimeout((function(){e.state.socket.emit("assign team",s.player.id)}),ae.quiz.assignTeamForMilliseconds)),e.setState({session:s.session,player:s.player,sessionForm:Object(x.a)(Object(x.a)({},e.state.sessionForm),{},{isSubmitting:!1,hasSubmitted:!0,previousSubmission:t})})}))}}},{key:"handleSessionFormChange",value:function(e,s){this.setState({sessionForm:{playerName:e,sessionName:s,isPlayerNameValid:this.isPlayerNameValid(e),isSessionNameValid:this.isSessionNameValid(s),isValid:this.isSessionFormValid(e,s)}})}},{key:"isSessionNameValid",value:function(e){return e&&e.length>=5}},{key:"isPlayerNameValid",value:function(e){return e&&e.length>=3}},{key:"isSessionFormValid",value:function(e,s){return this.isSessionNameValid(s)&&this.isPlayerNameValid(e)}},{key:"render",value:function(){return Object(n.jsxs)("section",{className:"section is-paddingless",children:[this.state.session&&Object(n.jsx)(te,{showTeamAssignedScreenUntil:this.state.showTeamAssignedScreenUntil,initialLoadComplete:this.state.initial.updateAfterServerLoad&&this.state.initial.statusAfterPlayerLoad,session:this.state.session,player:this.state.player,rounds:this.state.rounds,playerStatus:this.state.playerStatus}),!this.state.session&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ie,{sessionForm:this.state.sessionForm,handleChange:this.handleSessionFormChange,handleSubmit:this.handleSessionFormSubmit}),Object(n.jsx)(ce,{})]}),this.state.sessionForm.hasSubmitted&&!this.state.session&&Object(n.jsxs)("div",{className:"notification is-warning",children:["Sorry,"," ",Object(n.jsx)("strong",{children:this.state.sessionForm.previousSubmission})," ","is not currently a valid session."]}),Object(n.jsx)(oe,{connected:this.state.socket.connected})]})}}]),t}(i.Component),le=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsx)("div",{id:"wrapper",className:"columns",style:{padding:"0 20px"},children:Object(n.jsx)("div",{className:"column is-half is-offset-one-quarter",children:Object(n.jsx)(re,{})})}),Object(n.jsx)(p,{})]})},de=function(e){return Object(n.jsx)("span",{className:(e.isLive?"is-success":"is-danger")+" tag",style:{marginLeft:"5px",marginRight:"5px"},children:e.isLive?"-  -  LIVE  -  -":"NOT LIVE"})},he=t(15),ue=(t(38),function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).onDeleteSessionClicked=n.onDeleteSessionClicked.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"onDeleteSessionClicked",value:function(e){var s=this;Object(he.confirmAlert)({title:"Are you sure?",message:"You want to wipe out "+e.name+"?",buttons:[{label:"Yes!",onClick:function(){return s.props.handleDeleteSession(e.id)}},{label:"No",onClick:null}]})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"-"}),Object(n.jsx)("th",{children:"ID"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Live?"}),Object(n.jsx)("th",{children:"Players (Connected)"}),Object(n.jsx)("th",{style:{color:"orange"},children:"Orange"}),Object(n.jsx)("th",{style:{color:"purple"},children:"Purple"}),Object(n.jsx)("th",{style:{color:"grey"},children:"None"}),Object(n.jsx)("th",{children:"Rounds (Completed)"})]})}),Object(n.jsx)("tbody",{children:this.props.sessions.map((function(s,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{onClick:function(){return e.onDeleteSessionClicked(s)},children:Object(n.jsx)(T.a,{icon:L.h,style:{color:"black"}})})}),Object(n.jsx)("td",{children:Object(n.jsx)("a",{onClick:function(){return e.props.handleSelectSession(s.id)},children:s.id})}),Object(n.jsx)("td",{children:Object(n.jsx)("a",{onClick:function(){return e.props.handleSelectSession(s.id)},children:s.name})}),Object(n.jsxs)("td",{children:[Object(n.jsx)("button",{className:"button is-info",onClick:function(){return e.props.handleFlipSessionLive(s.id)},children:"Flip"}),Object(n.jsx)(de,{isLive:s.isLive})]}),Object(n.jsxs)("td",{children:[s.players.length," (",s.players.filter((function(e){return e.isConnected})).length,")"]}),Object(n.jsx)("td",{style:{color:"orange"},children:s.players.filter((function(e){return 1==e.teamId})).length}),Object(n.jsx)("td",{style:{color:"purple"},children:s.players.filter((function(e){return 2==e.teamId})).length}),Object(n.jsx)("td",{style:{color:"grey"},children:s.players.filter((function(e){return null==e.teamId})).length}),Object(n.jsxs)("td",{children:[s.roundInstances.length," (",s.roundInstances.filter((function(e){return null!=e&&null!=e.endTime&&q()(e.endTime).isBefore(q()())})).length,")"]})]},t)}))})]})}}]),t}(i.Component)),je=function(e){var s="None",t="#ddd";if(e.teamId){var i=e.teams.find((function(s){return s.id==e.teamId}));i&&(s=i.name,t=i.colour)}return Object(n.jsx)("span",{style:{color:t},children:s})},be=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).handleFlipTeam=n.handleFlipTeam.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"handleFlipTeam",value:function(e){var s=this;Object(he.confirmAlert)({title:"Are you sure?",message:"You want to flip the team for "+e.name+"?",buttons:[{label:"Yes!",onClick:function(){return s.props.handleFlipTeam(e)}},{label:"No",onClick:null}]})}},{key:"onDeletePlayerClicked",value:function(e){var s=this;Object(he.confirmAlert)({title:"Are you sure?",message:"You want to ***DELETE*** "+e.name+"?",buttons:[{label:"Yes!",onClick:function(){return s.props.handleDeletePlayer(e.id)}},{label:"No",onClick:null}]})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("table",{className:"table content has-text-centered is-striped is-narrow is-hoverable",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"-"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Team"}),Object(n.jsx)("th",{children:"-"}),Object(n.jsx)("th",{children:"Questions Asked"}),Object(n.jsx)("th",{children:"Questions Answered"}),Object(n.jsx)("th",{children:"Correct Answers"}),Object(n.jsx)("th",{children:"Correct Percentage"}),Object(n.jsx)("th",{children:"Total Score"})]})}),Object(n.jsx)("tbody",{children:this.props.players.map((function(s,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{onClick:function(){return e.onDeletePlayerClicked(s)},children:Object(n.jsx)(T.a,{icon:L.h,style:{color:"black"}})})}),Object(n.jsx)("td",{className:"has-text-weight-bold has-text-"+(s.isConnected?"success":"danger"),children:s.name}),Object(n.jsx)("td",{className:"has-text-weight-bold",children:Object(n.jsx)(je,{teamId:s.teamId,teams:e.props.teams})}),Object(n.jsx)("td",{children:s.teamId&&Object(n.jsx)("button",{className:"button is-info",onClick:function(){return e.handleFlipTeam(s)},children:"Flip Team"})}),Object(n.jsx)("td",{children:s.totalQuestions}),Object(n.jsx)("td",{children:s.answeredQuestions}),Object(n.jsx)("td",{children:s.correctAnswers}),Object(n.jsx)("td",{children:0!=s.answeredQuestions?Math.round(s.correctAnswers/s.answeredQuestions*100)+"%":"N/A"}),Object(n.jsx)("td",{children:s.totalScore})]},t)}))})]})}}]),t}(i.Component),me=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={selectedRoundLength:30,selectedRoundDelay:5,selectedWrongAnswerFactor:-1,inputPointsPerQuestion:10,isLoadingPreviousRounds:!1,selectedPlatonicRoundIds:[]},n.handleRoundLengthChange=n.handleRoundLengthChange.bind(Object(v.a)(n)),n.handleRoundDelayChange=n.handleRoundDelayChange.bind(Object(v.a)(n)),n.handlePointsPerQuestionChange=n.handlePointsPerQuestionChange.bind(Object(v.a)(n)),n.handleWrongAnswerFactorChange=n.handleWrongAnswerFactorChange.bind(Object(v.a)(n)),n.onSubmitNewRound=n.onSubmitNewRound.bind(Object(v.a)(n)),n.onClickStartRound=n.onClickStartRound.bind(Object(v.a)(n)),n.newRoundIsValid=n.newRoundIsValid.bind(Object(v.a)(n)),n.platonicRoundLabelClicked=n.platonicRoundLabelClicked.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.forceUpdate()}},{key:"newRoundIsValid",value:function(){return Number.isInteger(this.state.inputPointsPerQuestion)&&this.state.selectedPlatonicRoundIds.length>0&&!Number.isNaN(this.state.selectedRoundLength)&&this.state.selectedRoundLength>0&&this.state.selectedRoundLength<60}},{key:"onClickStartRound",value:function(){var e=this;if(this.newRoundIsValid()){var s="";this.state.selectedPlatonicRoundIds.forEach((function(t){s+=e.props.platonicRounds.filter((function(e){return e.id==t}))[0].name+" / "})),Object(he.confirmAlert)({title:"Are you sure?",message:"You want to start a round of "+s.toString().toUpperCase()+" for "+this.state.selectedRoundLength+" minutes,  starting in "+this.state.selectedRoundDelay+" seconds?",buttons:[{label:"Yes!",onClick:function(){return e.onSubmitNewRound()}},{label:"No",onClick:null}]})}}},{key:"platonicRoundLabelClicked",value:function(e){var s=this.state.selectedPlatonicRoundIds,t=s.indexOf(e);s.indexOf(e)>=0?s.splice(t,1):s.push(e),this.setState({selectedPlatonicRoundIds:s})}},{key:"handleRoundLengthChange",value:function(e){this.setState({selectedRoundLength:parseFloat(e.target.value)})}},{key:"handleRoundDelayChange",value:function(e){this.setState({selectedRoundDelay:parseInt(e.target.value)})}},{key:"handleWrongAnswerFactorChange",value:function(e){this.setState({selectedWrongAnswerFactor:parseInt(e.target.value)})}},{key:"handlePointsPerQuestionChange",value:function(e){try{var s=parseInt(e.target.value);this.setState({inputPointsPerQuestion:s})}catch(t){}}},{key:"onSubmitNewRound",value:function(){var e=q()().add(this.state.selectedRoundDelay,"s");e.add(5,"s");var s={startTime:e.utc().format(),endTime:e.add(this.state.selectedRoundLength,"m").utc().format(),platonicRoundIds:this.state.selectedPlatonicRoundIds,sessionId:this.props.session.id,pointsPerQuestion:this.state.inputPointsPerQuestion,wrongAnswerFactor:this.state.selectedWrongAnswerFactor};this.props.handleSubmitNewRound(s)}},{key:"isLive",value:function(e,s){var t=q()();return t.isAfter(e)&&t.isBefore(s)}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"notification",children:Object(n.jsx)("a",{onClick:function(){return e.props.handleSelectSession(null)},children:"Go Back"})}),Object(n.jsxs)("div",{className:"box",children:[Object(n.jsxs)("h2",{className:"subtitle",style:{display:"inline-block"},children:["Session ",this.props.session.id," : ",this.props.session.name]}),Object(n.jsx)(de,{isLive:this.props.session.isLive}),Object(n.jsx)("button",{className:"button is-info",onClick:function(){return e.props.handleFlipSessionLive(e.props.session.id)},children:"Flip"})]}),Object(n.jsx)("div",{className:"box",children:Object(n.jsx)(be,{handleDeletePlayer:this.props.handleDeletePlayer,handleFlipTeam:this.props.handleFlipTeam,players:this.props.session.players,teams:this.props.teams})}),Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h2",{className:"subtitle",children:"Previous Rounds"}),Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"-"}),Object(n.jsx)("th",{children:"Number"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"PPQ"}),Object(n.jsx)("th",{children:"Start"}),Object(n.jsx)("th",{children:"End"}),Object(n.jsx)("th",{children:"Questions Asked"}),Object(n.jsx)("th",{children:"Questions Answered"}),Object(n.jsx)("th",{children:"Correct Answers"}),Object(n.jsx)("th",{children:"Correct Percentage"})]})}),Object(n.jsx)("tbody",{children:this.props.session.roundInstances&&this.props.session.roundInstances.length>0&&this.props.session.roundInstances.map((function(s,t){return Object(n.jsxs)("tr",{className:e.isLive(s.startTime,s.endTime)?"has-background-success":"has-background-warning",children:[Object(n.jsx)("td",{children:Object(n.jsx)("a",{onClick:function(){return e.props.handleDeleteRoundInstance(s.id)},children:Object(n.jsx)(T.a,{icon:L.h,style:{color:"black"}})})}),Object(n.jsx)("td",{className:"has-text-centered",children:t+1}),Object(n.jsx)("td",{children:s.platonicRounds.map((function(e){return e.name})).join("/")}),Object(n.jsx)("td",{children:s.pointsPerQuestion}),Object(n.jsx)("td",{children:Object(n.jsx)(R.a,{format:"HH:mm:ss",children:s.startTime})}),Object(n.jsx)("td",{children:Object(n.jsx)(R.a,{format:"HH:mm:ss",children:s.endTime})}),Object(n.jsxs)("td",{className:"has-text-centered",children:[" ",s.questionsAsked?s.questionsAsked:"0"," "]}),Object(n.jsxs)("td",{className:"has-text-centered",children:[" ",s.questionsAnswered?s.questionsAnswered:"0"," "]}),Object(n.jsxs)("td",{className:"has-text-centered",children:[" ",s.correctAnswers?s.correctAnswers:"0"," "]}),Object(n.jsxs)("td",{className:"has-text-centered",children:[" ",s.questionsAnswered&&s.correctAnswers?Math.round(s.correctAnswers/s.questionsAnswered*100)+"%":"N/A"," "]})]},t)}))})]})]}),Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h3",{className:"has-text-bold is-size-4",children:"Create New Round: "}),Object(n.jsx)("table",{className:"table",children:Object(n.jsx)("tbody",{children:this.props.platonicRounds.map((function(s,t){return Object(n.jsx)("tr",{children:Object(n.jsx)("th",{children:Object(n.jsxs)("label",{onClick:function(){return e.platonicRoundLabelClicked(s.id)},className:"checkbox "+(s.parseAsMaths?"has-text-info":""),htmlFor:"checkbox"+s.name,children:[Object(n.jsx)("input",{style:{marginRight:"5px"},type:"checkbox",name:"checkbox"+s.name,value:s.id,checked:e.state.selectedPlatonicRoundIds.indexOf(s.id)>=0}),s.name]})})},t)}))})}),Object(n.jsx)("table",{className:"table",children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("label",{htmlFor:"roundLength",className:"label",children:"Length: "})}),Object(n.jsxs)("th",{children:[Object(n.jsxs)("select",{id:"roundLength",value:this.state.selectedRoundLength,onChange:this.handleRoundLengthChange,children:[Object(n.jsx)("option",{value:.1,children:"6 seconds"}),Object(n.jsx)("option",{value:.25,children:"15 seconds"}),Object(n.jsx)("option",{value:1,children:"1"}),Object(n.jsx)("option",{value:2,children:"2"}),Object(n.jsx)("option",{value:5,children:"5"}),Object(n.jsx)("option",{value:8,children:"8"}),Object(n.jsx)("option",{value:10,children:"10"}),Object(n.jsx)("option",{value:12,children:"12"}),Object(n.jsx)("option",{value:15,children:"15"}),Object(n.jsx)("option",{value:15,children:"20"}),Object(n.jsx)("option",{value:15,children:"25"}),Object(n.jsx)("option",{value:30,children:"30"})]}),Object(n.jsx)("span",{style:{marginLeft:"5px"},children:"minutes"})]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("label",{htmlFor:"roundDelay",className:"label",children:"Starting in: "})}),Object(n.jsxs)("th",{children:[Object(n.jsxs)("select",{id:"roundDelay",value:this.state.selectedRoundDelay,onChange:this.handleRoundDelayChange,children:[Object(n.jsx)("option",{value:5,children:"5"}),Object(n.jsx)("option",{value:10,children:"10"}),Object(n.jsx)("option",{value:15,children:"15"}),Object(n.jsx)("option",{value:15,children:"20"}),Object(n.jsx)("option",{value:30,children:"30"}),Object(n.jsx)("option",{value:60,children:"60"}),Object(n.jsx)("option",{value:600,children:"600"})]}),Object(n.jsx)("span",{style:{marginLeft:"5px"},children:"seconds"})]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("label",{htmlFor:"wrongAnswerFactor",className:"label",children:"Wrong Answer Multiplication Factor "})}),Object(n.jsx)("th",{children:Object(n.jsxs)("select",{id:"wrongAnswerFactor",value:this.state.selectedWrongAnswerFactor,onChange:this.handleWrongAnswerFactorChange,children:[Object(n.jsx)("option",{value:0,children:"0"}),Object(n.jsx)("option",{value:-1,children:"-1"}),Object(n.jsx)("option",{value:-2,children:"-2"})]})})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("label",{htmlFor:"pointsPerQuestion",className:"label",children:"Points Per Question: "})}),Object(n.jsx)("th",{children:Object(n.jsx)("input",{id:"pointsPerQuestion",value:this.state.inputPointsPerQuestion,onChange:this.handlePointsPerQuestionChange})})]}),Object(n.jsx)("tr",{children:Object(n.jsx)("th",{children:Object(n.jsx)("button",{type:"submit",className:(this.newRoundIsValid()?"is-success":"is danger")+" button",disabled:!this.newRoundIsValid(),onClick:this.onClickStartRound,children:"Start!"})})})]})})]})]})}}]),t}(i.Component),pe=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){return Object(c.a)(this,t),s.call(this,e)}return Object(o.a)(t,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[!this.props.selectedSessionId&&Object(n.jsx)(ue,{sessions:this.props.sessions,handleDeleteSession:this.props.handleDeleteSession,handleFlipSessionLive:this.props.handleFlipSessionLive,handleSelectSession:this.props.handleSelectSession}),this.props.selectedSessionId&&Object(n.jsx)(me,{session:this.props.sessions.filter((function(s){return s.id==e.props.selectedSessionId}))[0],platonicRounds:this.props.platonicRounds,teams:this.props.teams,handleFlipTeam:this.props.handleFlipTeam,handleSelectSession:this.props.handleSelectSession,handleFlipSessionLive:this.props.handleFlipSessionLive,handleSubmitNewRound:this.props.handleSubmitNewRound,handleDeleteRoundInstance:this.props.handleDeleteRoundInstance,handleDeletePlayer:this.props.handleDeletePlayer})]})}}]),t}(i.Component),xe=function(e){return Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"ID"}),Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Question Count"})]})}),Object(n.jsx)("tbody",{children:e.platonicRounds.map((function(e,s){return Object(n.jsxs)("tr",{className:e.parseAsMaths?"has-text-info":"",children:[Object(n.jsx)("td",{children:e.id}),Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:e.questionCount?e.questionCount:"?"})]},s)}))})]})},Oe=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;Object(c.a)(this,t),n=s.call(this,e);var i=ae.socket.protocol+"://"+ae.socket.address+":"+ae.socket.port,a=y()(i);return window.addEventListener("focus",function(){n.fetchQuiz()}.bind(Object(v.a)(n))),a.on("connect",function(){a.emit("admin connection")}.bind(Object(v.a)(n))),a.on("client connection changed",(function(){return n.fetchQuiz()})),a.on("update admin data",(function(){return n.fetchQuiz()})),n.state={socket:a,selectedSessionId:null,sessions:[],platonicRounds:[],teams:[],isFetching:!1,newSessionName:""},n.handleSelectSession=n.handleSelectSession.bind(Object(v.a)(n)),n.fetchQuiz=n.fetchQuiz.bind(Object(v.a)(n)),n.handleFlipSessionLive=n.handleFlipSessionLive.bind(Object(v.a)(n)),n.handleSubmitNewRound=n.handleSubmitNewRound.bind(Object(v.a)(n)),n.handleFlipTeam=n.handleFlipTeam.bind(Object(v.a)(n)),n.handleDeletePlayer=n.handleDeletePlayer.bind(Object(v.a)(n)),n.handleDeleteSession=n.handleDeleteSession.bind(Object(v.a)(n)),n.handleReseedDatabase=n.handleReseedDatabase.bind(Object(v.a)(n)),n.handleWipeAllData=n.handleWipeAllData.bind(Object(v.a)(n)),n.onClickWipeAllData=n.onClickWipeAllData.bind(Object(v.a)(n)),n.onClickReseedDatabase=n.onClickReseedDatabase.bind(Object(v.a)(n)),n.handleDeleteRoundInstance=n.handleDeleteRoundInstance.bind(Object(v.a)(n)),n.onChangeSessionName=n.onChangeSessionName.bind(Object(v.a)(n)),n.createNewSession=n.createNewSession.bind(Object(v.a)(n)),n.isNewSessionNameValid=n.isNewSessionNameValid.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="QAdmin",this.loadInitialData(),this.fetchQuiz()}},{key:"loadInitialData",value:function(){this.loadPlatonicRounds(),this.loadTeams()}},{key:"loadPlatonicRounds",value:function(){var e=this;this.state.socket.emit("fetch platonic round list",(function(s){e.setState({platonicRounds:s})}))}},{key:"loadTeams",value:function(){var e=this;this.state.socket.emit("fetch teams",(function(s){e.setState({teams:s})}))}},{key:"fetchQuiz",value:function(){var e=this;this.state.isFetching||(this.setState({isFetching:!0}),this.state.socket.emit("fetch quiz",(function(s){e.setState({sessions:s,isFetching:!1})})))}},{key:"onChangeSessionName",value:function(e){this.setState({newSessionName:e.target.value})}},{key:"handleFlipTeam",value:function(e){var s=this;this.state.socket.emit("flip team",e,(function(){s.fetchQuiz()}))}},{key:"handleSelectSession",value:function(e){this.fetchQuiz(),this.setState({selectedSessionId:e})}},{key:"handleSubmitNewRound",value:function(e){var s=this;this.state.socket.emit("submit new round instance",e,(function(){s.fetchQuiz()}))}},{key:"handleDeleteRoundInstance",value:function(e){var s=this;this.state.socket.emit("delete round instance",e,this.state.selectedSessionId,(function(){s.fetchQuiz()}))}},{key:"updateRoundInstanceTimes",value:function(){}},{key:"handleFlipSessionLive",value:function(e){var s=this;this.state.socket.emit("admin flip session live",e,function(){s.fetchQuiz()}.bind(this))}},{key:"onClickWipeAllData",value:function(){var e=this;Object(he.confirmAlert)({title:"Are you sure?",message:"*** THIS WILL WIPE ALL OF THE EXISTING SESSIONS, ROUNDS, PLAYERS, AND SUBMITTED QUESTIONS/ANSWERS ***",buttons:[{label:"Yes!",onClick:function(){return e.handleWipeAllData()}},{label:"No",onClick:null}]})}},{key:"onClickReseedDatabase",value:function(){var e=this;Object(he.confirmAlert)({title:"Are you sure?",message:"*** THIS WILL DELETE **ALL DATA** AND RESEED ALL OF THE PLATONIC ROUNDS AND QUESTIONS ***",buttons:[{label:"Yes!",onClick:function(){return e.handleReseedDatabase()}},{label:"No",onClick:null}]})}},{key:"handleReseedDatabase",value:function(){var e=this;this.state.socket.emit("reseed database",(function(s){"ok"==s?alert("ok"):s&&"error"==s.name?alert("error"):alert("unexpected response: "+s),e.loadInitialData(),e.fetchQuiz()}))}},{key:"handleWipeAllData",value:function(){var e=this;this.state.socket.emit("wipe all data",(function(){e.loadInitialData(),e.fetchQuiz()}))}},{key:"isNewSessionNameValid",value:function(){return this.state.newSessionName&&this.state.newSessionName.length>3}},{key:"createNewSession",value:function(){var e=this;this.isNewSessionNameValid()&&this.state.socket.emit("create new session",this.state.newSessionName,(function(){e.fetchQuiz()}))}},{key:"handleDeletePlayer",value:function(e){var s=this;e&&Number.isInteger(e)&&this.state.socket.emit("delete player",e,(function(){s.fetchQuiz()}))}},{key:"handleDeleteSession",value:function(e){var s=this;e&&Number.isInteger(e)&&this.state.socket.emit("delete session",e,(function(){s.fetchQuiz()}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsx)("div",{className:"columns",children:Object(n.jsx)("div",{className:"column is-half is-offset-one-quarter",children:Object(n.jsxs)("section",{className:"section",children:[Object(n.jsx)("h1",{className:"title",children:"Admin"}),Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h2",{className:"subtitle is-size-4",children:"Sessions"}),Object(n.jsx)(pe,{sessions:this.state.sessions,platonicRounds:this.state.platonicRounds,teams:this.state.teams,selectedSessionId:this.state.selectedSessionId,handleFlipTeam:this.handleFlipTeam,handleSubmitNewRound:this.handleSubmitNewRound,handleDeleteRoundInstance:this.handleDeleteRoundInstance,handleDeletePlayer:this.handleDeletePlayer,handleDeleteSession:this.handleDeleteSession,handleFlipSessionLive:this.handleFlipSessionLive,handleSelectSession:this.handleSelectSession}),!this.state.selectedSessionId&&Object(n.jsx)("div",{children:Object(n.jsx)("table",{className:"table",children:Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("label",{className:"label",htmlFor:"sessionName",children:"Add New Session"})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"field",children:Object(n.jsxs)("div",{className:"control has-icons-left has-icons-right",children:[Object(n.jsx)("input",{className:(this.isNewSessionNameValid()?"is-success":"is-warning")+" input",id:"sessionName",placeholder:"New session name",value:this.state.newSessionName,onChange:this.onChangeSessionName}),Object(n.jsx)("span",{className:"icon is-small is-left",children:Object(n.jsx)(T.a,{icon:L.i})}),Object(n.jsx)(ne,{success:!!this.isNewSessionNameValid(),position:"is-right"})]})})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"level",children:Object(n.jsx)("div",{className:"level-item",children:Object(n.jsx)("button",{className:"button is-info",onClick:this.createNewSession,children:"Create"})})})})]})})})})]}),Object(n.jsxs)("div",{className:"box",children:[Object(n.jsx)("h2",{className:"subtitle is-size-4",children:"Available Platonic Rounds"}),Object(n.jsxs)("div",{children:["(",Object(n.jsx)("span",{className:"has-text-info",children:"Maths"})," ","/ Not Maths)"]}),Object(n.jsx)(xe,{platonicRounds:this.state.platonicRounds})]}),!this.state.selectedSessionId&&Object(n.jsx)("div",{className:"box",children:Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)("h2",{className:"subtitle is-size-4",children:"Dangerous Nonsense"}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"button is-danger",onClick:this.onClickWipeAllData,children:"Wipe All Data"})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"button is-danger",onClick:this.onClickReseedDatabase,children:"Reseed Database"})})]})})]})})}),Object(n.jsx)(p,{})]})}}]),t}(i.Component),ve=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;Object(c.a)(this,t),n=s.call(this,e);var i=ae.socket.protocol+"://"+ae.socket.address+":"+ae.socket.port,a=y()(i);return a.on("connect",(function(){a.emit("temporary admin connection")})),n.state={temporarySocket:a,inputWord:"",passed:ae.isDev},n.onChangeInputWord=n.onChangeInputWord.bind(Object(v.a)(n)),n.onClickGoButton=n.onClickGoButton.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"onChangeInputWord",value:function(e){this.setState({inputWord:e.target.value})}},{key:"onClickGoButton",value:function(){var e=this;this.state.temporarySocket.emit("authenticate admin",this.state.inputWord,(function(s){e.setState({passed:s})}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[!this.state.passed&&Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"password",value:this.state.inputWord,onChange:this.onChangeInputWord}),Object(n.jsx)("button",{onClick:this.onClickGoButton,children:"Go"})]}),this.state.passed&&Object(n.jsx)(Oe,{})]})}}]),t}(i.Component),fe=(t(169),t(81)),ye=t.n(fe),Se=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=s.call(this,e)).state={},n}return Object(o.a)(t,[{key:"roundUp",value:function(e){var s=!1;e<0&&(s=!0,e*=-1);var t=Math.pow(10,e.toString().length-1);return e/=t,e=Math.ceil(e),e*=t,s&&(e*=-1),e}},{key:"render",value:function(){var e=this,s=Math.max(this.props.width-500,300),t=Math.max(this.props.height-300,300),i=[],a=0,c=0;this.props.teamScores&&this.props.teamScores.length>0&&(i=this.props.teamScores.map((function(e,s){return{x:"Team "+e.name,y:e.totalScore,color:e.colour,label:e.totalScore,yOffset:0,style:{fontSize:"2.8rem",fontWeight:"bold",fill:"white",stroke:"black",strokeWidth:"2px"}}})),a=Math.max.apply(Math,Object(O.a)(this.props.teamScores.map((function(e){return e.totalScore}))).concat([0])),c=this.props.teamScores.reduce((function(e,s){return s.totalScore<e?s.totalScore:e}),0));var o=this.roundUp(a);console.log(a+"; "+o);var r=[c,o];return Object(n.jsxs)("div",{style:{width:s+100,margin:"auto"},children:[Object(n.jsx)("a",{onClick:function(){return e.props.selectSession(null)},children:"Back"}),Object(n.jsxs)(E.a,{animation:!0,height:t,width:s,xType:"ordinal",yDomain:r,style:{overflow:"visible"},children:[Object(n.jsx)(E.c,{animation:!0,data:i,colorType:"literal"}),Object(n.jsx)(E.b,{animation:!0,allowOffsetToBeReversed:!0,data:i,style:{color:"white !important"}}),Object(n.jsx)(E.d,{animation:!0,style:{fontSize:"2rem",fontWeight:"bold"}}),Object(n.jsx)(E.e,{animation:!0,style:{fontSize:"1.5rem",fontWeight:"bold"}})]})]})}}]),t}(i.Component),ge=ye()()(Se),Ne=function(e){Object(r.a)(t,e);var s=Object(l.a)(t);function t(e){var n;Object(c.a)(this,t),n=s.call(this,e);var i=ae.socket.protocol+"://"+ae.socket.address+":"+ae.socket.port,a=y()(i);return a.on("connect",(function(){a.emit("scores connection")})),a.on("update scores data",(function(){n.updateSession()})),a.on("update sessions list",(function(){n.fetchLiveSessions()})),n.state={socket:a,liveSessions:[],selectedSessionId:null,teamScores:[]},n.receiveLiveSessions=n.receiveLiveSessions.bind(Object(v.a)(n)),n.tick=n.tick.bind(Object(v.a)(n)),n.updateSession=n.updateSession.bind(Object(v.a)(n)),n.selectSession=n.selectSession.bind(Object(v.a)(n)),n.fetchLiveSessions=n.fetchLiveSessions.bind(Object(v.a)(n)),n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),900),this.fetchLiveSessions(),document.title="Q Scores"}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"fetchLiveSessions",value:function(){this.state.socket.emit("fetch live sessions",this.receiveLiveSessions)}},{key:"receiveLiveSessions",value:function(e){this.setState({liveSessions:e})}},{key:"selectSession",value:function(e){this.setState({selectedSessionId:e,teamScores:[]}),this.updateSession()}},{key:"tick",value:function(){this.updateSession()}},{key:"updateSession",value:function(){var e=this;this.state.selectedSessionId&&this.state.socket.emit("fetch team scores",this.state.selectedSessionId,(function(s){e.setState({teamScores:s})}))}},{key:"render",value:function(){var e=this,s=this.state.liveSessions,t=!!this.state.selectedSessionId;return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsxs)("section",{className:"section",children:[!t&&Object(n.jsxs)("div",{className:"box",children:[s&&s.length>0&&Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"title",children:"Pick Session"}),Object(n.jsx)("table",{className:"table",children:Object(n.jsx)("tbody",{children:s.map((function(s,t){return Object(n.jsx)("tr",{children:Object(n.jsx)("td",{children:Object(n.jsx)("a",{className:"subtitle",onClick:function(){e.selectSession(s.id)},children:s.name})})},t)}))})})]}),(!s||0==s.length)&&Object(n.jsx)("h1",{className:"title",children:"No Live Sessions"})]}),t&&Object(n.jsx)(ge,{sessionId:this.state.selectedSessionId,selectSession:this.selectSession,teamScores:this.state.teamScores})]})]})}}]),t}(i.Component),ke=function(){return Object(n.jsx)(d,{children:Object(n.jsx)(h.a,{basename:"/q",children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",component:le}),Object(n.jsx)(j.a,{exact:!0,path:"/admin",component:ve}),Object(n.jsx)(j.a,{exact:!0,path:"/scores",component:Ne}),Object(n.jsx)(j.a,{component:we})]})})})},we=function(){return Object(n.jsx)("h1",{children:"404.. Page not found!"})},Re=t(52);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(172),Object(Re.render)(Object(n.jsx)(ke,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.add8cdda.chunk.js.map